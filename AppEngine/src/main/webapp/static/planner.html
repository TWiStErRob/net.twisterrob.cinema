<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<!-- Use: cineworld.html?date=2013-07-17&film=56173&film=39728&film=107709 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
	<title>Cineworld Planner</title>

	<link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
	<link rel="stylesheet" type="text/css" href="/static/styles/libs/jquery/jquery.layout-default-1.3.0.rc30.79.css" />
	<link rel="stylesheet" type="text/css" href="/static/styles/libs/jquery/jquery.toChecklist-1.5.0.css" />
	<link rel="stylesheet" type="text/css" href="/static/styles/libs/debug/quickjsonformatter.css" />

	<script type="text/javascript" src="/static/scripts/libs/jquery/jquery-1.9.1.js"></script>
	<script type="text/javascript">jQuery.migrateMute = true;</script>
	<script type="text/javascript" src="/static/scripts/libs/jquery/jquery-migrate-1.2.1.js"></script>
	<script type="text/javascript" src="/static/scripts/libs/jquery/jquery-ui-1.10.3.js"></script>
	<script type="text/javascript" src="/static/scripts/libs/jquery/jquery.layout-1.3.0.rc30.79.js"></script>
	<!-- TODO Replace with https://github.com/andreasbernhard/history.js-->
	<script type="text/javascript" src="/static/scripts/libs/jquery/jquery.ba-hashchange-1.3.js"></script>
	<script type="text/javascript" src="/static/scripts/libs/jquery/jquery-ui-1.7.2-i18n.js"></script>
	<script type="text/javascript" src="/static/scripts/libs/jquery/jquery.toChecklist-1.5.0.js"></script>
	<script type="text/javascript" src="/static/scripts/libs/moment/moment-2.1.0.js"></script>
	<!--<script type="text/javascript" src="/static/scripts/libs/moment/moment-2.1.0-hu.js"></script>-->
	<script type="text/javascript" src="/static/scripts/libs/moment/moment-range-0.1.6.js"></script>
	<script type="text/javascript" src="/static/scripts/libs/underscore/underscore-1.4.3.js"></script>
	<script type="text/javascript" src="/static/scripts/libs/debug/quickjsonformatter.js"></script>

	<script>
		// trace console:
		// search:  (?i)([a-z_]+): *function *([a-z_]+)? *\( *(([a-z_]+ *,? *)*) *\) +\{
		// replace: $0\n\t\t\t\t/*tracer*/console.debug(String.prototype.format.apply(moment().toISOString() + " \1/\2(\3): "+(arguments.length>=1?"#1={0}":"")+(arguments.length>=2?", #2={1}":"")+(arguments.length>=3?", #3={2}":"")+(arguments.length>=4?", #4={3}":"")+(arguments.length>=5?", #5={4}":""), arguments));
		/**
		 * Protect window.console method calls, e.g. console is not defined on IE
		 * unless dev tools are open, and IE doesn't define console.debug
		 */
		(function() {
			var console = (window.console = window.console || {});
			var noop = console.noop = function () {};
			var log = console.log || noop;
			var start = function(name) { return function(param) { log("Start " + name + ": " + param); } };
			var end = function(name) { return function(param) { log("End " + name + ": " + param); } };

			var methods = {
				// Internet Explorer (IE 10): http://msdn.microsoft.com/en-us/library/ie/hh772169(v=vs.85).aspx#methods
				// assert(test, message, optionalParams), clear(), count(countTitle), debug(message, optionalParams), dir(value, optionalParams), dirxml(value), error(message, optionalParams), group(groupTitle), groupCollapsed(groupTitle), groupEnd([groupTitle]), info(message, optionalParams), log(message, optionalParams), msIsIndependentlyComposed(oElementNode), profile(reportName), profileEnd(), time(timerName), timeEnd(timerName), trace(), warn(message, optionalParams)
				// "assert", "clear", "count", "debug", "dir", "dirxml", "error", "group", "groupCollapsed", "groupEnd", "info", "log", "msIsIndependentlyComposed", "profile", "profileEnd", "time", "timeEnd", "trace", "warn"

				// Safari (2012. 07. 23.): https://developer.apple.com/library/safari/#documentation/AppleApplications/Conceptual/Safari_Developer_Guide/DebuggingYourWebsite/DebuggingYourWebsite.html#//apple_ref/doc/uid/TP40007874-CH8-SW20
				// assert(expression, message-object), count([title]), debug([message-object]), dir(object), dirxml(node), error(message-object), group(message-object), groupEnd(), info(message-object), log(message-object), profile([title]), profileEnd([title]), time(name), markTimeline("string"), trace(), warn(message-object)
				// "assert", "count", "debug", "dir", "dirxml", "error", "group", "groupEnd", "info", "log", "profile", "profileEnd", "time", "markTimeline", "trace", "warn"

				// Firefox (2013. 05. 20.): https://developer.mozilla.org/en-US/docs/Web/API/console
				// debug(obj1 [, obj2, ..., objN]), debug(msg [, subst1, ..., substN]), dir(object), error(obj1 [, obj2, ..., objN]), error(msg [, subst1, ..., substN]), group(), groupCollapsed(), groupEnd(), info(obj1 [, obj2, ..., objN]), info(msg [, subst1, ..., substN]), log(obj1 [, obj2, ..., objN]), log(msg [, subst1, ..., substN]), time(timerName), timeEnd(timerName), trace(), warn(obj1 [, obj2, ..., objN]), warn(msg [, subst1, ..., substN])
				// "debug", "dir", "error", "group", "groupCollapsed", "groupEnd", "info", "log", "time", "timeEnd", "trace", "warn"

				// Chrome (2013. 01. 25.): https://developers.google.com/chrome-developer-tools/docs/console-api
				// assert(expression, object), clear(), count(label), debug(object [, object, ...]), dir(object), dirxml(object), error(object [, object, ...]), group(object[, object, ...]), groupCollapsed(object[, object, ...]), groupEnd(), info(object [, object, ...]), log(object [, object, ...]), profile([label]), profileEnd(), time(label), timeEnd(label), timeStamp([label]), trace(), warn(object [, object, ...])
				// "assert", "clear", "count", "debug", "dir", "dirxml", "error", "group", "groupCollapsed", "groupEnd", "info", "log", "profile", "profileEnd", "time", "timeEnd", "timeStamp", "trace", "warn"
				// Chrome (2012. 10. 04.): https://developers.google.com/web-toolkit/speedtracer/logging-api
				// markTimeline(String)
				// "markTimeline"

				assert: noop, clear: noop, trace: noop, count: noop, timeStamp: noop, msIsIndependentlyComposed: noop,
				debug: log, info: log, log: log, warn: log, error: log,
				dir: log, dirxml: log, markTimeline: log,
				group: start('group'), groupCollapsed: start('groupCollapsed'), groupEnd: end('group'),
				profile: start('profile'), profileEnd: end('profile'),
				time: start('time'), timeEnd: end('time')
			};
			for (var method in methods) {
				if ( methods.hasOwnProperty(method) && !(method in console) ) { // define undefined methods as best-effort methods
					console[method] = methods[method];
				}
			}
		})();

		if (!String.prototype.format) {
			String.prototype.format = function() {
				var args = arguments; // used in inner match-replacement function
				return this.replace(/{(\d+)}/g, function(match, number) {
					return typeof args[number] != 'undefined' ? args[number] : match;
				});
			};
		}

		if (!moment.fn.formatInZone) {
			moment.fn.formatInZone = function(format, offset) {
				return this.clone().utc().add('hours', offset).format(format);
			}
		}
		console.groupStart = console.noop;

		moment.fn.toJSON = function(start, end) {
			return this.format();
		};

		// FIXME remove if error handling is fixed by Dean
		function imdbapi(response) {
			console.warn("imdbapi called, callback of http://deanclatworthy.com/imdb/ was not respected: " + JSON.stringify(response));
		}

		twister = $.extend(window.twister || {}, {});
		twister.config = $.extend(twister.config || {}, {
			debug: true,
			localUrlBase: 'http://localhost:8888',
			logResponses: false
		});
		twister.utils = $.extend(twister.utils || {}, {
			/**
			 * Remove attribute notation from JSON response.
			 */
			clean: function(obj) {
				for (var prop in obj) {
					if (Object.prototype.hasOwnProperty.call(obj, prop)) {
						var val = obj[prop];
						if(typeof(val) === "object") {
							twister.utils.clean(val);
						}
						if(prop.length >= 1 && prop[0] == '@') {
							delete obj[prop];
							obj[prop.substring(1)] = val;
						}
					}
				}
				return obj;
			}
		});
		twister.utils.url = $.extend(twister.utils.url || {}, {
			getHashAnchor: function() {
				// #anchor!param1=value1&param2=&param3=value3
				var end = window.location.hash.indexOf('!');
				if (end === -1) end = window.location.hash.length;
				return window.location.hash.substring(1, end);
			},

			getHashParam: function(name) {
				// #anchor!param1=value1&param2=&param3=value3
				var start = window.location.hash.indexOf('!') + 1;
				var match = new RegExp('(?:^|&)' + name + '=([^&]*)')
							.exec(window.location.hash.substring(start));
				return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
			},

			getQueryParam: function(name) {
				// ?param1=value1&param2=&param3=value3
				return twister.utils.url.getUrlParams()[name];
			},

			// http://stackoverflow.com/a/520845/253468 + http://stackoverflow.com/a/11030951/253468
			getUrlParams: function (url) {
				var re = /(?:\?|&(?:amp;)?)([^=&#]+)(?:=?([^&#]*))/g,
					match, params = {},
				decode = function (s) {return decodeURIComponent(s.replace(/\+/g, " "));};

				if (typeof url == "undefined") url = document.location.href;

				while (match = re.exec(url)) {
					var pName = decode(match[1]);
					var pValue = decode(match[2]);
					if (pName in params) {
						if (params[pName] instanceof Array) {
							params[pName].push(pValue);
						} else {
							params[pName] = [ params[pName], pValue ];
						}
					} else {
						params[pName] = pValue;
					}
				}
				return params;
			}
		});
		twister.utils.time = $.extend(twister.utils.time || {}, {
				parseDate: function (dateString, timeZone) {
					return moment(google.gdata.DateTime.fromIso8601(dateString).date)
						.utc()
						.add('hours', twister.utils.time.parseOffset(dateString));
					//var date = new timezoneJS.Date(dateString);
					//date.setTimezone(timeZone);
					//return date;
				},
				parseOffset: function (dateString) {
					var offset = dateString.substring(23);
					var hours = offset.substring(1, 3);
					var minutes = offset.substring(4, 6);
					result = +hours + minutes / 60;
					if (offset[0] == '-') { result *= -1; }
					return result;
				}
		});

		twister.cineworld = $.extend(twister.cineworld || {}, {
			const: {
				apiKey: "9qfgpF7B",
				getFilmsTimeout: 300,
				getPerformancesTimeout: 300,
				default: {
					adLength: 15,
					breakLength: 5
				}
			},
			cinemas: {
				all: [ /* retrieved from cineworld API */ ],
				selectedIds: [ /* update when checklist checked */ ]
			},
			films: {
				all: [ /* retrieved from cineworld API */ ],
				selectedIds: [ /* update when checklist checked */ ],
				responses: {
					// quickbook: { /* response from quickbook API */ }
					// internal: { /* response from internal API */ }
					// merged: { /* merged previous responses */ }
				},
				lengths: { /* cache for film lengths */ }
			},
			performances: {
				// [index by date][index by cinema][index by id]
			},
			planner: {},
			date: moment().add('days', 0).format("YYYY-MM-DD"),
			getDate: function cineworld_getDate() {
				return twister.cineworld.date.replace(/-/g, '');
			},
			rebuildUrl: function rebuildUrl() {
				$("#url").attr("href",
					location.protocol + '//' + location.host + location.pathname
					+ '?' + twister.cineworld.getArgs());
			},
			updateFromQuery: function updateFromQuery() {
				twister.cineworld.date = twister.utils.url.getQueryParam('date') || twister.cineworld.date;
				twister.cineworld.films.selectedIds = twister.utils.url.getQueryParam('film') || twister.cineworld.films.selectedIds;
				twister.cineworld.cinemas.selectedIds = twister.utils.url.getQueryParam('cinema') || twister.cineworld.cinemas.selectedIds;
			},
			writeUI: function() {
				twister.ui.screen.date.val(twister.cineworld.date).change();
			},
			getArgs: function() {
				var args = 'date=' + encodeURIComponent(twister.cineworld.date);
				args += '&' + $.map(twister.cineworld.cinemas.selectedIds, function(e) {return 'cinema=' + e; }).join('&');
				args += '&' + $.map(twister.cineworld.films.selectedIds, function(e) {return 'film=' + e; }).join('&');
				return args;
			},
			getFavoriteCinemas: function cineworld_getFavoriteCinemas() {
				console.groupStart("Favorite Cinemas");
				$('#cinemas').text("Loading...");
				return $.ajax({
					url: twister.config.localUrlBase + '/rest/cinemas/favorites'
				}).always(function() {
					console.groupEnd("Favorite Cinemas");
				});
			},
			parseFavoriteCinemas: function cineworld_parseFavoriteCinemas(response, status, xhr) {
				response = twister.utils.clean(response);
				twister.cineworld.cinemas.selectedIds = $.map(response, function(fav) { return fav.cinemaId; });
			},
			getCinemas: function cineworld_getCinemas() {
				console.groupStart("Cineworld Cinemas");
				$('#cinemas').text("Loading...");
				twister.ui.showStatus("Loading cinemas...");
				return $.ajax({
					url: 'http://www.cineworld.com/api/quickbook/cinemas',
					data: {
						key: twister.cineworld.const.apiKey,
						full: true
					}
				}).always(function() {
					console.groupEnd("Favorite Cinemas");
				});
			},
			clearCinemas: function cineworld_clearCinemas() {
				twister.cineworld.cinemas.all = {};
				return $('#cinemas').replaceWith('<select id="cinemas" name="cinemas" multiple="multiple"></select>');
			},
			parseCinemas: function cineworld_parseCinemas(response) {
				/*
				address: "Queens Links Leisure Park, Links Road, Aberdeen"
				cinema_url: "http://www.cineworld.co.uk/cinemas/1/information"
				id: 1
				name: "Aberdeen - Queens Links"
				postcode: "AB24 5EN"
				telephone: "0871 200 2000"
				*/

				// Check for errors from the server
				if (response.errors) {
					$('#status').html(JSON.stringify(response, null, '  '));
					twister.ui.showStatus("Failure getting cinemas: " + JSON.stringify(response, null, '  '));
				} else {
					twister.ui.showStatus("Got " + response.cinemas.length + " cinemas.");
					twister.cineworld.clearCinemas();

					var cinemasList = $('#cinemas');
					$.each(response.cinemas, function() {
						twister.cineworld.cinemas.all[this.id] = this;
						var option = new Option(this.name, this.id);
						$(option)
							.attr('title', JSON.stringify(this, null, '  '));
						cinemasList.append(option);
					});
					cinemasList.toChecklist( {
						showSelectedItems: false,
						addSearchBox: false,
						addScrollBar : false,
						preferIdOverName: false,
						itemWidth: 200,
						searchBoxText: 'Filter by cinema name here...',
						animateSearch: 0,
						onItemChanged: function cinemasList_onItemChanged() {
							var checkedCinemas = $("li :checkbox:checked", "#cinemas");
							var checkedCinemaIds = $.map(checkedCinemas, function(e) { return e.value; });
							twister.cineworld.cinemas.selectedIds = checkedCinemaIds;
							twister.cineworld.rebuildUrl();

							if (twister.cineworld.cinemas.getFilmsTimer !== undefined) {
								clearTimeout(twister.cineworld.cinemas.getFilmsTimer);
								twister.cineworld.cinemas.getFilmsTimer = undefined;
							}
							if (twister.cineworld.cinemas.getFilmsTimer === undefined) {
								twister.cineworld.cinemas.getFilmsTimer = setTimeout(function getFilmsTimer_onTimeout() {
									twister.cineworld.cinemas.getFilmsTimer = undefined;
									twister.cineworld.getFilms();
								}, twister.cineworld.const.getFilmsTimeout);
							}
						},
						onItemSelected: function cinemasList_onItemSelected(input) {
							var request = {
								cinema: input.value,
								rating: 100,
								displayOrder: 1
							};
							var cinemaName = $(arguments[0]).siblings("label").text();
							return; // TODO enable again
							$.ajax({
								url: twister.config.localUrlBase + '/rest/cinemas/favorite',
								data: request,
								success: function(response, status, xhr) {
									twister.ui.showStatus("Cinema #" + input.value + ": " + cinemaName + " successfully favorited.");
								},
								error: function(xhr, status, error) {
									twister.ui.showStatus("Cannot favorite cinema #" + input.value + ": " + cinemaName + " - " + status + ", " + error);
								}
							});
						}
					} );
					if(twister.cineworld.cinemas.selectedIds.length != 0) {
						$.each(twister.cineworld.cinemas.selectedIds, function select_cinema() {
							var cinemaElem = $('#cinemas li:has(:checkbox[value=' + this + '])');
							if(cinemaElem.length == 0) {
								console.warn("Cinema disappeared: " + this);
							} else {
								cinemaElem.click();
							}
						});
					} else {
						$('#cinemas_checkLondon').click();
					}
				}
			},
			getFilms: function cineworld_getFilms() {
				console.groupStart("Cineworld Films");
				var request = {
					key: twister.cineworld.const.apiKey,
					full: true,
					cinema: twister.cineworld.cinemas.selectedIds,
					date: twister.cineworld.getDate()
				};
				if(request.cinema.length == 0) {
					twister.cineworld.parseFilms({films: []});
					return;
				}
				var dfd = new jQuery.Deferred(); // TODO continue here
				$.ajax({
					url: 'http://www.cineworld.com/api/quickbook/films',
					data: request,
					success: function(response, status, xhr) {
						twister.cineworld.films.responses.quickbook = response;
						twister.cineworld.mergeResponses();
					}
				});
				$.ajax({
					url: 'http://www.cineworld.com/api/film/list',
					data: request,
					success: function(response, status, xhr) {
						twister.cineworld.films.responses.internal = response;
						twister.cineworld.mergeResponses();
					}
				});
			},
			mergeResponses: function cineworld_mergeResponses() {
				var responses = twister.cineworld.films.responses;
				if(responses.quickbook == undefined) {
					console.log("Waiting for film response from quickbook API");
					return;
				}
				if(responses.internal == undefined) {
					console.log("Waiting for film response from internal API");
					return;
				}

				// Preprocess
				$.each(responses.internal.films, function() {
					this.poster = responses.internal.base_url + this.poster;
				});

				var response = { films: {}, errors: [] };

				// Films
				function addResponseByEdi(type) {
					return function() {
						response.films[this.edi] = response.films[this.edi] || {};
						response.films[this.edi][type] = this;
					}
				}
				$.each(responses.quickbook.films, addResponseByEdi('quickbook'));
				$.each(responses.internal.films, addResponseByEdi('internal'));
				$.each(response.films, function(index) {
					response.films[index] = $.extend(true, this, this.quickbook, this.internal);
				});

				// Errors
				$.extend(response.errors, responses.quickbook.errors, responses.internal.errors);
				if(response.errors.length == 0) {
					delete response.errors;
				}

				// Final processing
				response.films = $.map(response.films, function(film) { return film; });
				twister.cineworld.parseFilms(twister.cineworld.films.responses.merged = response);
			},
			clearFilms: function cineworld_clearFilms() {
				twister.cineworld.films.all = {};
				return $('#films').replaceWith('<select id="films" name="films" multiple="multiple"></select>');
			},
			parseFilms: function cineworld_parseFilms(response) {
				/*
				http://www.cineworld.com/api/quickbook/films:
				3D: false
				classification: "15"
				edi: 63829
				film_url: "http://www.cineworld.co.uk/whatson/6237"
				id: 6237
				imax: false
				poster_url: "http://www.cineworld.co.uk/assets/media/films/6237_poster.jpg"
				still_url: "http://www.cineworld.co.uk/assets/media/films/6237_still.jpg"
				title: "This Is The End"
				+ http://www.cineworld.co.uk/api/film/detail?key=9qfgpF7B&film=6237

				http://www.cineworld.com/api/film/list:
				actors: "Steve Carell, Al Pacino, Kristen Wiig, Ken Jeong, Steve Coogan, Russell Brand, Miranda Cosgrove"
				cert: "U"
				edi: 43599
				id: 6322
				length: 98
				poster: "/assets/media/films/6235_poster.jpg"
				release: "20130628"
				title: "2D - Despicable Me 2"
				trailer: "http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Despicable Me 2 _qtp.mp4"
				weighted: 65
				*/

				// Check for errors from the server
				if (response.errors) {
					$('#status').html(JSON.stringify(response, null, '  '));
				} else {
					twister.cineworld.clearFilms();

					var filmsList = $('#films');
					response.films.sort(function(a, b) { return a.title.toUpperCase().localeCompare(b.title.toUpperCase()); });
					$.each(response.films, function() {
						twister.cineworld.films.all[this.edi] = this;
						var title = this.title + ' (<span class="runtime">' + (this.length !== undefined? this.length : '?') + '</span>)';
						var option = new Option(title, this.edi);
						$(option).attr('title', JSON.stringify(this, null, '  '));
						filmsList.append(option);
					});
					filmsList.toChecklist( {
						showSelectedItems: false,
						addScrollBar : false,
						addSearchBox: true,
						useHTMLLabels: true,
						preferIdOverName: false,
						searchBoxText: 'Filter by film title here...',
						animateSearch: 0,
						onItemChanged: function filmsList_onItemChanged() {
							var checkedFilms = $("li :checkbox:checked", "#films");
							var checkedFilmEdis = $.map(checkedFilms, function(e) { return e.value; });
							twister.cineworld.films.selectedIds = checkedFilmEdis;
							twister.cineworld.rebuildUrl();

							if (twister.cineworld.films.getPerformancesTimer !== undefined) {
								clearTimeout(twister.cineworld.films.getPerformancesTimer);
								twister.cineworld.films.getPerformancesTimer = undefined;
							}
							if (twister.cineworld.films.getPerformancesTimer === undefined) {
								twister.cineworld.films.getPerformancesTimer = setTimeout(function getPerformancesTimer_onTimeout() {
									twister.cineworld.films.getPerformancesTimer = undefined;
									twister.cineworld.getPerformances();
								}, twister.cineworld.const.getPerformancesTimeout);
							}
						},
					} );
					$.each(twister.cineworld.films.selectedIds, function film_select() {
						var filmElem = $('#films li:has(:checkbox[value=' + this + '])');
						if(filmElem.length == 0) {
							console.warn("Film disappeared: " + this);
						} else {
							filmElem.click();
						}
					});
					console.groupEnd(); // Cineworld Films
					console.groupStart("Missing film lengths (imdb)");
					$.each(response.films, function film_getLength() {
						twister.cineworld.getFilmLength(this);
					});
					console.groupEnd(); // Missing film lengths (imdb)
				}
			},
			getFilmLength: function cineworld_getFilmLength(film) {
				if(film.edi in twister.cineworld.films.lengths) {
					film.length = twister.cineworld.films.lengths[film.edi];
				}
				if(film.length !== undefined) {
					twister.cineworld.parseFilmLength(film, {runtime: film.length});
					return;
				}
				function simplify(title) {
					return title.replace(/^\s*(IMAX)?\s*[23]D\s*-\s*/gi, "");
				}
				$.ajax({
					url: 'http://deanclatworthy.com/imdb/',
					data:  {
						q: simplify(film.title),
						type: 'jsonp'
					},
					success: function(response, status, xhr) {
						// http://deanclatworthy.com/imdb/?q=World%20War%20Z&type=jsonp&callback=callback
						/* callback({
							imdbid: "tt0816711", 
							imdburl: "http://www.imdb.com/title/tt0816711/", 
							genres: "Action,Drama,Horror,Sci-Fi,Thriller", 
							languages: "English", 
							country: "USA,Malta", 
							votes: "67357", 
							stv: 0, 
							series: 0, 
							rating: "7.3", 
							runtime: "116min", 
							title: "World War Z", 
							year: "2013", 
							usascreens: 3607, 
							ukscreens: 0, 
							cacheExpiry: 1374104898
						}) */
						if(response.error) {
							$('#status').html(JSON.stringify(response, null, '  '));
							return;
						}
						twister.cineworld.parseFilmLength(film, response);
					},
					error : function(xhr, status, error) {
						twister.cineworld.parseFilmLength(film, {runtime: 0});
					}
				});
			},
			parseFilmLength: function cineworld_parseFilmLength(film, response) {
				if(response.error || response.runtime == 0 || !$.isNumeric(parseInt(response.runtime))) {
					console.warn("Warning, cannot get film runtime for: " + film.title + "; received: " + JSON.stringify(response));
					response.runtime = 100;
				}
				film.length = parseInt(response.runtime);
				twister.cineworld.films.lengths[film.edi] = film.length;
				$('#films #films_' + film.edi + ' + label .runtime').text(film.length);
				twister.cineworld.plan();
			},
			getPerformances: function cineworld_getPerformances() {
				console.groupStart("Cineworld Performances");
				twister.cineworld.rebuildPerformancesTable();
				$('#performances_listing > table td[id^=performances_]').each(twister.cineworld.updatePerformance);
			},
			rebuildPerformancesTable: function cineworld_rebuildPerformancesTable() {
				var html = '';
				html += '<table id="performances">';

				html += '<thead><tr>';
				html += '<th>Cinema</th>';
				html += $.map(twister.cineworld.films.selectedIds, function(edi) {
					var film = twister.cineworld.films.all[edi];
					var filmDisplay = film.title + "<br/>("  + film.length + " min)";
					var filmTitle = JSON.stringify(film, null, '  ').replace(/"/g,'&quot;');
					return '<th class="film" title="' + filmTitle + '">' + filmDisplay + '</th>';
				}).join('');
				html += '<th>Planner</th>';
				html += '</tr></thead>';

				html += '<tbody>';
				html += $.map(twister.cineworld.cinemas.selectedIds, function(cid) {
					var cinema = twister.cineworld.cinemas.all[cid];
					var cinemaDisplay = cinema.name + ' (<a href="http://maps.google.com/?q=' + cinema.postcode + '">' + cinema.postcode + '</a>)';
					var cinemaTitle = JSON.stringify(cinema, null, '  ').replace(/"/g,'&quot;');
					var row = '';
					row += '<tr>';
					row += '<td title="' + cinemaTitle + '">' + cinemaDisplay + '</td>';
					row += $.map(twister.cineworld.films.selectedIds, function(edi) {
								return '<td id="performances_'+cid+'_'+edi+'" cid="'+cid+'" edi="'+edi+'"><img src="/static/images/ajax-loader.gif" /></td>';
						}).join('');
					row += '<td><ul id="planner_'+cid+'"></ul></td>';
					row += '</tr>';
					return row;
				}).join('');
				html += '</tbody>';
				html += '</table>';
				$('#performances_listing').html(html);
			},
			updatePerformance: function cineworld_updatePerformance() {
				var elem = $(this);
				var request = {
					key: twister.cineworld.const.apiKey,
					cinema: elem.attr('cid'),
					film: elem.attr('edi'),
					date: twister.cineworld.getDate()
				}
				var perfs = twister.cineworld.performances = twister.cineworld.performances || {};
				perfs[request.date] = perfs[request.date] || {};
				perfs[request.date][request.cinema] = perfs[request.date][request.cinema] || {};
				var perf = perfs[request.date][request.cinema][request.film];
				if(perf && new Date().getTime() - perf.retrieved.getTime() < 10 * 60 * 1000) { // use cache
					twister.cineworld.parsePerformances(elem, request, {performances: perf});
				} else {
					$.ajax({
						url: 'http://www.cineworld.com/api/quickbook/performances',
						data: request,
						success: function(response, status, xhr) {
							$.extend(response.performances, {retrieved: new Date()});
							twister.cineworld.parsePerformances(elem, request, response);
						}
					});
				}
			},
			parsePerformances: function(elem, request, response) {
				/*
				{
				"performances":[{"time":"13:00","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=976170&key=9qfgpF7B"},{"time":"15:30","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=976178&key=9qfgpF7B"},{"time":"18:10","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=976186&key=9qfgpF7B"},{"time":"20:40","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=976194&key=9qfgpF7B"}],
				"legends":[{"code":"reg","description":"Regular"}]
				}
				*/
				if (response.errors) {
					console.error(JSON.stringify(response));
					elem.html(JSON.stringify(response, null, '  '));
				} else {
					twister.cineworld.performances[request.date][request.cinema][request.film] = response.performances;
					elem.html($.map(response.performances, function(perf) {
						return '<a href="' + perf.booking_url + '" title="' + JSON.stringify(perf, null, '  ').replace(/"/g, '&quot;') + '">'
								+ perf.time
								+ '</a>'
					}).join(", "));
				}
				twister.cineworld.plan();
			},
			plan: function() {
				if($('#performances_listing > table td[id^=performances_] > img').length != 0) return;
				if($('#films_checklist li label > .runtime:contains(?)').length != 0) return;
				if(twister.cineworld.cinemas.getFilmsTimer !== undefined || twister.cineworld.films.selectedIds.length == 0) return;
				if(twister.cineworld.films.getPerformancesTimer !== undefined) return;
				console.groupEnd(); // Cineworld Performances
				console.groupStart("The Plan (cinemas=" +  twister.cineworld.cinemas.selectedIds + ", films=" + twister.cineworld.films.selectedIds + ")");
				var date = twister.cineworld.getDate();
				$.each(twister.cineworld.cinemas.selectedIds, function(cinemaIndex, cid) {
					var cinema = twister.cineworld.cinemas.all[cid];
					$.each(twister.cineworld.films.selectedIds, function(filmIndex, edi) {
						var film = twister.cineworld.films.all[edi];
						var performances = twister.cineworld.performances[date][cid][edi];
						if (performances === undefined) return true;
						$.each(performances, function(performanceIndex, perf) {
							var time = moment(date + perf.time, 'YYYYMMDDHH:mm');
							var adLength = twister.cineworld.const.default.adLength;
							var plan = {
								scheduledTime: time,
								startTime: time.clone().add('minutes', adLength),
								endTime: time.clone().add('minutes', adLength + film.length),
								adLength: adLength
							};
							plan.movieRange = moment().range(plan.startTime, plan.endTime);
							plan.fullRange = moment().range(plan.scheduledTime, plan.endTime);

							perf.date = date;
							perf.cinema = cinema;
							perf.film = film;
							perf.plan = plan;
						});
					});
					twister.cineworld.planCinema(cinema, twister.cineworld.planner.graph = [{
						watched: ["travel"],
						performance: {
							plan: {
								endTime: moment(date, 'YYYYMMDDHH')
							},
							film: {
								edi: -1
							}
						},
						next: [],
						level: 0
					}]);
				});
				if (twister.config.debug) {
					var html = '<span style="font-family: monospace">JSON (twister.cineworld.performances):<br/>\
						<a href="javascript:void(0);" onClick="twister.cineworld.planner.formatter.CollapseAll()">collapse</a>\
						<a href="javascript:void(0);" onClick="twister.cineworld.planner.formatter.CollapseLevel(3)">2+</a>\
						<a href="javascript:void(0);" onClick="twister.cineworld.planner.formatter.CollapseLevel(4)">3+</a>\
						<a href="javascript:void(0);" onClick="twister.cineworld.planner.formatter.CollapseLevel(5)">4+</a>\
						<a href="javascript:void(0);" onClick="twister.cineworld.planner.formatter.CollapseLevel(6)">5+</a>\
						<a href="javascript:void(0);" onClick="twister.cineworld.planner.formatter.CollapseLevel(7)">6+</a>\
						<a href="javascript:void(0);" onClick="twister.cineworld.planner.formatter.CollapseLevel(8)">7+</a>\
						<a href="javascript:void(0);" onClick="twister.cineworld.planner.formatter.ExpandAll()">expand all</a>\
					</span>\
					<div style="width: 100%; height: 200px; overflow: scroll">\
					<div id="plan_jsonDebug"></div>\
					</div>';
					$('#planner_listing').html(html);
					twister.cineworld.planner.formatter = new QuickJSONFormatter({
						CanvasId: "plan_jsonDebug",
						SingleTab: "\t",
						TabSize: 1,
						IsCollapsible: true,
						ImgExpanded: 'http://bodurov.com/JsonFormatter/images/Expanded.gif',
						ImgCollapsed: 'http://bodurov.com/JsonFormatter/images/Collapsed.gif',
						OnError: function(e) {
							console.warn(e);
						}
					});
					twister.cineworld.planner.formatter.Process(JSON.stringify(twister.cineworld.performances));
				}
				console.groupEnd(); // The Plan
			},
			planCinema: function cineworld_planCinema(cinema, graph) {
				if(graph.level == 0) console.groupStart("Plan Cinema: " + cinema.name + " (" + cinema.id + ")");
				var date = twister.cineworld.getDate();
				$.each(graph, function(nodeIndex, node) {
					$.each(twister.cineworld.films.selectedIds, function(filmIndex, edi) {
						if( $.inArray(1 * edi, node.watched) == -1) { // didn't watch it already
							var performances = twister.cineworld.performances[date][cinema.id][edi];
							if (performances === undefined) return true;
							$.each(performances, function(performanceIndex, perf) {
								if(node.performance.plan.endTime < (perf.plan.startTime)) { // starts after the other finishes
									node.next.push({
										watched: node.watched.concat(perf.film.edi),
										performance: perf,
										next: [],
										prev: node,
										level: node.level + 1
									});
								}
							});
						}
					});
					if(node.next.length != 0) {
						twister.cineworld.planCinema(cinema, node.next);
					} else if (twister.cineworld.films.selectedIds.length + 1 == node.watched.length && node.watched.length != 1) {
						var results = [];
						while(node.prev) {
							results.unshift(node);
							if(node.prev.performance.film.edi != -1
									&& node.performance.plan.movieRange.start - node.prev.performance.plan.movieRange.end > 25 * 60 * 1000) {
								console.log("Ruled out: break between movies too big: " + 
									Math.floor((node.performance.plan.movieRange.start - node.prev.performance.plan.movieRange.end) / 60 / 1000));
								return;
							}
							node = node.prev;
						}
						var result = '';
						result += results[0].performance.plan.movieRange.start.format("HH:mm");
						result += '&nbsp;-&nbsp;';
						result += results[results.length - 1].performance.plan.movieRange.end.format("HH:mm");
						result += '<ul>';
						$.each(results, function() {
							if(this.prev.performance.film.edi != -1) {
								result += '\n\t<li>' + this.prev.performance.plan.movieRange.end.format("HH:mm")
										+ "-" +  this.performance.plan.movieRange.start.format("HH:mm")
										+ ": (" + Math.floor((this.performance.plan.movieRange.start - this.prev.performance.plan.movieRange.end) / 60 / 1000) + " minutes break)";
							}
							result += '\n\t<li>' + this.performance.plan.movieRange.start.format("HH:mm")
									+ "-" +  this.performance.plan.movieRange.end.format("HH:mm")
									+ ": " + this.performance.film.title;
						});
						result += '</ul>';
						console.log(result);
						$('#planner_' + cinema.id).append('<li>' + result + '</li>');
					} else if (node.watched.length > 1) {
						console.log("Ruled out: not all movies are included: " + node.watched);
					}
					if(graph.level == 0) console.groupEnd(); // Plan Cinema: cinema.name (cinema.id)
				});
			}
		});

		twister.ui = $.extend(twister.ui || {}, {
			screen: {
				layout: undefined,
				date: undefined
			},
			init: function () {
				twister.ui.initLayout();
				twister.ui.initCalendar();
			},
			initLayout: function() {
				twister.ui.screen.layout = $('body').layout({
					center: {
						childOptions: {
							north: {
								initClosed: false
							},
							west: {
								size: 250
							}
						}
					},
					north: {
						initClosed: false
					},
					south: {
						initClosed: true
					}
				});
			},
			initCalendar: function() {
				moment.lang("en");
				$.datepicker.setDefaults($.datepicker.regional[""]);
				//timezoneJS.timezone.zoneFileBasePath = 'tz'; // needs --allow-file-access-from-files

				var config = {
					changeMonth: true,
					changeYear: true,
					showButtonPanel: true,
					showOtherMonths: true,
					selectOtherMonths: true,
					showWeek: true,
					firstDay: 1,
					numberOfMonths: 2,
					constrainInput: true,
					weekHeader: "",
					showOn: "both",
					dateFormat: "yy-mm-dd",
				};
				twister.ui.screen.date = $("#date")
					.datepicker($.extend({}, config, {
						onClose: function( selectedDate ) {
							//$( "#to" ).datepicker( "option", "minDate", selectedDate );
						}
					}))
					.change(function(e) {
						twister.cineworld.date = this.value;
						twister.cineworld.rebuildUrl();
						$("#dateDisplay").text(moment($("#date").val(), "YYYY-MM-DD").format("LL, dddd"));
						twister.cineworld.getFilms();
					})
				;
			},
			showStatus: function(statusText) {
				$('#statusmessage').text(statusText).animate({'margin-bottom': 0}, 200);
				setTimeout(function() {
					$('#statusmessage').animate({'margin-bottom':-25}, 200);
				}, 2000);
			}
		});

		$.ajaxPrefilter(/*dataTypes, */ function global_ajaxPrefilter(options, originalOptions, jqXHR) {
			if(twister.config.logResponses) {
				jqXHR.done(function global_ajaxSuccess(data, textStatus, jqXHR) {
					console.groupCollapsed(options.url + (options.data ? '&' + $.param(options.data) : ''));
					console.log("Options: " + JSON.stringify(options));
					console.log("Data: " + JSON.stringify(data));
					console.groupEnd();
				});
			}
			jqXHR.fail(function global_ajaxError(jqXHR, textStatus, errorThrown) {
				console.error("{0}, {1}".format(textStatus, errorThrown));
			});
		});

		$(document).ready(function document_ready() {
			console.log("------------------------------- Document ready. ----------------------------");
			twister.ui.init();
			twister.cineworld.updateFromQuery();
			twister.cineworld.writeUI();

			$.ajaxSetup({
				type: 'GET',
				traditional: true,
				dataType: 'jsonp'
			});

			$.when(true)
				.then(twister.cineworld.getFavoriteCinemas)
					.done(twister.cineworld.parseFavoriteCinemas)
				.then(twister.cineworld.getCinemas)
					.done(twister.cineworld.parseCinemas)
			;

		});
	</script>
	<style type="text/css">
		#title {
			font-family: Georgia;
			text-shadow: 2px 1px 3px darkgray;
		}
		#cinemas {
			width: 100%;
		}
		#cinemas_listing {
			overflow: overlay;
		}
		#performances th:first-child {
			white-space: nowrap;
		}
		#performances th.film {
			width: 200px;
		}
		#status {
			color: red;
		}
		table, tr, td, th {
			border: 1px solid #000;
		}
		#statusmessage {
			position: fixed;
			bottom: 0;
			padding: 0 5px;
			line-height: 25px;
			background-color: #eeee99;
			margin-bottom: -25px;
			font-weight: bold;
			left: 0;
			right: 0;
			z-index: 99;
		}
	</style>
</head>
<body>
	<div id="statusmessage"></div><!-- shown at the bottom of the page -->
	<div class="ui-layout-north">
		<h1 id="title">
			<span id="calendarDisplay">Cineworld planner</span>
			(<span id="dateDisplay">date</span>)
		</h1>
		<div id="params">
			<label for="date">date</label>
			<input type="text" id="date" />
			<span><a id="url" href="#">Link to this page</a></span>
			<div id="status">&nbsp;</div>
		</div>
	</div>
	<div id="main_area" class="ui-layout-center">
		<div id="cinemas_listing" class="ui-layout-north">
			<div id="cinemas_controls">
				<input type="button" id="cinemas_checkAll" onclick="$('#cinemas').toChecklist('checkAll');" value="Check all" />
				<input type="button" id="cinemas_checkNone" onclick="$('#cinemas').toChecklist('clearAll');" value="Uncheck All" />
				<input type="button" id="cinemas_checkInvert" onclick="$('#cinemas').toChecklist('invert');" value="Invert" />
				<input type="button" id="cinemas_checkLondon" onclick="$('#cinemas').toChecklist('clearAll'); $('#cinemas li:contains(London)').click();" value="London" />
			</div>
			<div id="cinemas_container">
				<select id="cinemas" name="cinemas" multiple="multiple"></select>
			</div>
		</div>
		<div id="films_listing" class="ui-layout-west">
			<div id="films_controls">
			</div>
			<div id="films_container">
				<select id="films" name="films" multiple="multiple"></select>
			</div>
		</div>
		<div class="ui-layout-center">
			<div id="performances_listing">
			</div>
			<div id="planner_listing">
			</div>
		</div>
	</div>
	<div class="ui-layout-south">
		<div id="debug">
			<ul id="cinemas_selectedItems" />
			<ul id="films_selectedItems" />
		</div>
		<pre style="display:none">
			Today's dev: http://google.twisterrob.net/calendar.html

			Cineworld Unlimited planner

			Features:
			 *

			Used:
			http://www.scotthorlbeck.com/code/tochecklist/
			xhttps://developers.google.com/gdata/javadoc/com/google/gdata/data/calendar/CalendarEntry
			xhttp://momentjs.com/docs/#/manipulating/start-of/
			xhttp://documentcloud.github.com/underscore/#sortBy
			xhttps://developers.google.com/google-apps/calendar/v2/reference

			Next:
				* http://www.erichynds.com/blog/using-deferreds-in-jquery
				* http://api.jquery.com/category/deferred-object/
				* http://appendto.github.io/jquery-mockjax/examples/demo.html
				* auth
				* valid http://ajax.aspnetcdn.com/ajax/jQuery.Validate/1.6/jQuery.Validate.pack.js
		</pre>
	</div>
	<!-- TODO <script type="text/javascript" src="/global/analyticstracking.js"></script>-->
<script>
if(twister.config.debug) {
	// http://appendto.github.io/jquery-mockjax/examples/demo.html
	twister.mock = $.extend(twister.mock || {}, {});
	twister.mock.cineworld = $.extend(twister.mock.cineworld || {}, {
		quickbook: {
			performances: {"10":{"39728":[{"time":"13:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=945704&key=9qfgpF7B"},{"time":"15:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=945705&key=9qfgpF7B"},{"time":"18:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=945706&key=9qfgpF7B"},{"time":"21:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=945707&key=9qfgpF7B"}],"56173":[],"107709":[]},"22":{"39728":[{"time":"10:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1015360&key=9qfgpF7B"},{"time":"11:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1015365&key=9qfgpF7B"},{"time":"12:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1015370&key=9qfgpF7B"},{"time":"13:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=946621&key=9qfgpF7B"},{"time":"14:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1015379&key=9qfgpF7B"},{"time":"15:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1015384&key=9qfgpF7B"},{"time":"16:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=946622&key=9qfgpF7B"},{"time":"17:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1015391&key=9qfgpF7B"},{"time":"18:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1015398&key=9qfgpF7B"},{"time":"18:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=946623&key=9qfgpF7B"},{"time":"21:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1015415&key=9qfgpF7B"}],"56173":[{"time":"16:00","available":false,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=979261&key=9qfgpF7B"},{"time":"17:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=979263&key=9qfgpF7B"},{"time":"18:30","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=979275&key=9qfgpF7B"},{"time":"21:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=979288&key=9qfgpF7B"}],"107709":[{"time":"12:30","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1015369&key=9qfgpF7B"},{"time":"15:30","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1015385&key=9qfgpF7B"},{"time":"18:30","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1015400&key=9qfgpF7B"},{"time":"21:30","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1015416&key=9qfgpF7B"}]},"25":{"39728":[{"time":"12:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1003836&key=9qfgpF7B"},{"time":"13:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=946497&key=9qfgpF7B"},{"time":"14:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1003846&key=9qfgpF7B"},{"time":"16:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=946498&key=9qfgpF7B"},{"time":"17:25","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1003857&key=9qfgpF7B"},{"time":"18:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=946499&key=9qfgpF7B"}],"56173":[{"time":"14:20","available":false,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=992141&key=9qfgpF7B"},{"time":"15:40","available":false,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=992148&key=9qfgpF7B"},{"time":"17:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=992152&key=9qfgpF7B"},{"time":"18:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=992164&key=9qfgpF7B"}],"107709":[{"time":"13:45","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1003840&key=9qfgpF7B"},{"time":"16:45","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1003853&key=9qfgpF7B"},{"time":"19:45","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1003867&key=9qfgpF7B"}]},"26":{"39728":[],"56173":[{"time":"17:50","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=991651&key=9qfgpF7B"},{"time":"20:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=991656&key=9qfgpF7B"}],"107709":[{"time":"14:45","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=995863&key=9qfgpF7B"},{"time":"17:45","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=995866&key=9qfgpF7B"},{"time":"20:45","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=995870&key=9qfgpF7B"}]},"30":{"39728":[{"time":"13:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=995968&key=9qfgpF7B"},{"time":"18:05","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=995977&key=9qfgpF7B"}],"56173":[],"107709":[{"time":"20:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=995981&key=9qfgpF7B"}]},"32":{"39728":[],"56173":[],"107709":[]},"37":{"39728":[{"time":"13:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=995697&key=9qfgpF7B"},{"time":"15:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=999016&key=9qfgpF7B"},{"time":"16:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=995698&key=9qfgpF7B"},{"time":"17:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=999027&key=9qfgpF7B"},{"time":"18:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=995699&key=9qfgpF7B"},{"time":"20:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=999033&key=9qfgpF7B"}],"56173":[{"time":"17:30","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=971719&key=9qfgpF7B"}],"107709":[{"time":"14:15","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=999015&key=9qfgpF7B"},{"time":"17:15","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=999024&key=9qfgpF7B"},{"time":"20:15","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=999032&key=9qfgpF7B"}]},"45":{"39728":[{"time":"12:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1003499&key=9qfgpF7B"},{"time":"13:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=945551&key=9qfgpF7B"},{"time":"14:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1003507&key=9qfgpF7B"},{"time":"16:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=945552&key=9qfgpF7B"},{"time":"17:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1003515&key=9qfgpF7B"},{"time":"18:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=945553&key=9qfgpF7B"},{"time":"20:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1003522&key=9qfgpF7B"}],"56173":[{"time":"15:30","available":false,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=976178&key=9qfgpF7B","date":"20130717","cinema":{"id":45,"name":"London - Bexleyheath","cinema_url":"http://www.cineworld.co.uk/cinemas/45/information","address":"28-70 Broadway, Bexleyheath, Kent","postcode":"DA6 7LL","telephone":"0871 200 2000"},"film":{"quickbook":{"edi":56173,"title":"3D - Despicable Me 2","id":6235,"classification":"U","poster_url":"http://www.cineworld.co.uk/assets/media/films/6235_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6235","still_url":"http://www.cineworld.co.uk/assets/media/films/6235_still.jpg","3D":true,"imax":false},"internal":{"edi":56173,"title":"3D - Despicable Me 2","id":6323,"cert":"U","poster":"http://www.cineworld.co.uk/assets/media/films/6235_poster.jpg","length":98,"release":"20130628","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Despicable Me 2 _qtp.mp4","actors":"Steve Carell, Al Pacino, Kristen Wiig, Ken Jeong, Steve Coogan, Russell Brand, Miranda Cosgrove","weighted":58},"edi":56173,"title":"3D - Despicable Me 2","id":6323,"classification":"U","poster_url":"http://www.cineworld.co.uk/assets/media/films/6235_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6235","still_url":"http://www.cineworld.co.uk/assets/media/films/6235_still.jpg","3D":true,"imax":false,"cert":"U","poster":"http://www.cineworld.co.uk/assets/media/films/6235_poster.jpg","length":98,"release":"20130628","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Despicable Me 2 _qtp.mp4","actors":"Steve Carell, Al Pacino, Kristen Wiig, Ken Jeong, Steve Coogan, Russell Brand, Miranda Cosgrove","weighted":58},"plan":{"scheduledTime":"2013-07-17T15:30:00+01:00","startTime":"2013-07-17T15:45:00+01:00","endTime":"2013-07-17T17:23:00+01:00","adLength":15,"movieRange":{"start":"2013-07-17T15:45:00+01:00","end":"2013-07-17T17:23:00+01:00"},"fullRange":{"start":"2013-07-17T15:30:00+01:00","end":"2013-07-17T17:23:00+01:00"}}},{"time":"18:10","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=976186&key=9qfgpF7B","date":"20130717","cinema":{"id":45,"name":"London - Bexleyheath","cinema_url":"http://www.cineworld.co.uk/cinemas/45/information","address":"28-70 Broadway, Bexleyheath, Kent","postcode":"DA6 7LL","telephone":"0871 200 2000"},"film":{"quickbook":{"edi":56173,"title":"3D - Despicable Me 2","id":6235,"classification":"U","poster_url":"http://www.cineworld.co.uk/assets/media/films/6235_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6235","still_url":"http://www.cineworld.co.uk/assets/media/films/6235_still.jpg","3D":true,"imax":false},"internal":{"edi":56173,"title":"3D - Despicable Me 2","id":6323,"cert":"U","poster":"http://www.cineworld.co.uk/assets/media/films/6235_poster.jpg","length":98,"release":"20130628","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Despicable Me 2 _qtp.mp4","actors":"Steve Carell, Al Pacino, Kristen Wiig, Ken Jeong, Steve Coogan, Russell Brand, Miranda Cosgrove","weighted":58},"edi":56173,"title":"3D - Despicable Me 2","id":6323,"classification":"U","poster_url":"http://www.cineworld.co.uk/assets/media/films/6235_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6235","still_url":"http://www.cineworld.co.uk/assets/media/films/6235_still.jpg","3D":true,"imax":false,"cert":"U","poster":"http://www.cineworld.co.uk/assets/media/films/6235_poster.jpg","length":98,"release":"20130628","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Despicable Me 2 _qtp.mp4","actors":"Steve Carell, Al Pacino, Kristen Wiig, Ken Jeong, Steve Coogan, Russell Brand, Miranda Cosgrove","weighted":58},"plan":{"scheduledTime":"2013-07-17T18:10:00+01:00","startTime":"2013-07-17T18:25:00+01:00","endTime":"2013-07-17T20:03:00+01:00","adLength":15,"movieRange":{"start":"2013-07-17T18:25:00+01:00","end":"2013-07-17T20:03:00+01:00"},"fullRange":{"start":"2013-07-17T18:10:00+01:00","end":"2013-07-17T20:03:00+01:00"}}},{"time":"20:40","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=976194&key=9qfgpF7B","date":"20130717","cinema":{"id":45,"name":"London - Bexleyheath","cinema_url":"http://www.cineworld.co.uk/cinemas/45/information","address":"28-70 Broadway, Bexleyheath, Kent","postcode":"DA6 7LL","telephone":"0871 200 2000"},"film":{"quickbook":{"edi":56173,"title":"3D - Despicable Me 2","id":6235,"classification":"U","poster_url":"http://www.cineworld.co.uk/assets/media/films/6235_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6235","still_url":"http://www.cineworld.co.uk/assets/media/films/6235_still.jpg","3D":true,"imax":false},"internal":{"edi":56173,"title":"3D - Despicable Me 2","id":6323,"cert":"U","poster":"http://www.cineworld.co.uk/assets/media/films/6235_poster.jpg","length":98,"release":"20130628","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Despicable Me 2 _qtp.mp4","actors":"Steve Carell, Al Pacino, Kristen Wiig, Ken Jeong, Steve Coogan, Russell Brand, Miranda Cosgrove","weighted":58},"edi":56173,"title":"3D - Despicable Me 2","id":6323,"classification":"U","poster_url":"http://www.cineworld.co.uk/assets/media/films/6235_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6235","still_url":"http://www.cineworld.co.uk/assets/media/films/6235_still.jpg","3D":true,"imax":false,"cert":"U","poster":"http://www.cineworld.co.uk/assets/media/films/6235_poster.jpg","length":98,"release":"20130628","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Despicable Me 2 _qtp.mp4","actors":"Steve Carell, Al Pacino, Kristen Wiig, Ken Jeong, Steve Coogan, Russell Brand, Miranda Cosgrove","weighted":58},"plan":{"scheduledTime":"2013-07-17T20:40:00+01:00","startTime":"2013-07-17T20:55:00+01:00","endTime":"2013-07-17T22:33:00+01:00","adLength":15,"movieRange":{"start":"2013-07-17T20:55:00+01:00","end":"2013-07-17T22:33:00+01:00"},"fullRange":{"start":"2013-07-17T20:40:00+01:00","end":"2013-07-17T22:33:00+01:00"}}}],"107709":[{"time":"15:10","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1003510&key=9qfgpF7B"},{"time":"18:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1003519&key=9qfgpF7B"},{"time":"21:10","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1003528&key=9qfgpF7B"}]},"53":{"39728":[{"time":"13:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=946906&key=9qfgpF7B"},{"time":"16:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=946907&key=9qfgpF7B"},{"time":"18:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=946908&key=9qfgpF7B"},{"time":"21:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=995652&key=9qfgpF7B"}],"56173":[{"time":"15:40","available":false,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=972078&key=9qfgpF7B"},{"time":"18:20","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=972085&key=9qfgpF7B"},{"time":"20:40","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=972090&key=9qfgpF7B"}],"107709":[]},"60":{"39728":[{"time":"13:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=948245&key=9qfgpF7B"},{"time":"16:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=948246&key=9qfgpF7B"},{"time":"18:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=948247&key=9qfgpF7B"}],"56173":[{"time":"17:15","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=991799&key=9qfgpF7B"}],"107709":[{"time":"15:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1015005&key=9qfgpF7B"},{"time":"21:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1015017&key=9qfgpF7B"}]},"65":{"39728":[{"time":"11:40","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1012460&key=9qfgpF7B"},{"time":"12:40","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1012465&key=9qfgpF7B"},{"time":"13:20","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=945991&key=9qfgpF7B"},{"time":"14:20","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1012473&key=9qfgpF7B"},{"time":"15:20","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1012478&key=9qfgpF7B"},{"time":"16:00","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=945992&key=9qfgpF7B"},{"time":"17:00","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1012487&key=9qfgpF7B"},{"time":"18:00","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1012490&key=9qfgpF7B"},{"time":"18:40","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=945993&key=9qfgpF7B"},{"time":"21:15","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1012507&key=9qfgpF7B"}],"56173":[{"time":"16:00","available":false,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=990754&key=9qfgpF7B"},{"time":"17:35","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=990763&key=9qfgpF7B"},{"time":"20:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=990775&key=9qfgpF7B"}],"107709":[{"time":"11:35","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1012459&key=9qfgpF7B"},{"time":"14:30","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1012475&key=9qfgpF7B"},{"time":"17:30","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1012488&key=9qfgpF7B"},{"time":"19:45","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1012498&key=9qfgpF7B"},{"time":"20:25","available":true,"type":"reg","ad":true,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1012503&key=9qfgpF7B"}]},"66":{"39728":[{"time":"10:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1007112&key=9qfgpF7B"},{"time":"13:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=945886&key=9qfgpF7B"},{"time":"16:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=945887&key=9qfgpF7B"},{"time":"18:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=945888&key=9qfgpF7B"}],"56173":[{"time":"17:30","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=979594&key=9qfgpF7B"}],"107709":[{"time":"12:15","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1007117&key=9qfgpF7B"},{"time":"15:15","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1007128&key=9qfgpF7B"},{"time":"18:15","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1007137&key=9qfgpF7B"},{"time":"21:15","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1007147&key=9qfgpF7B"}]},"70":{"39728":[{"time":"13:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1007433&key=9qfgpF7B"},{"time":"14:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1007439&key=9qfgpF7B"},{"time":"16:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1007444&key=9qfgpF7B"},{"time":"17:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1007449&key=9qfgpF7B"},{"time":"18:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1007457&key=9qfgpF7B"},{"time":"20:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1007461&key=9qfgpF7B"}],"56173":[{"time":"15:15","available":false,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=971152&key=9qfgpF7B"},{"time":"16:30","available":false,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=971157&key=9qfgpF7B"},{"time":"19:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=971168&key=9qfgpF7B"}],"107709":[{"time":"15:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1007441&key=9qfgpF7B"},{"time":"18:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1007455&key=9qfgpF7B"},{"time":"19:30","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1007458&key=9qfgpF7B"},{"time":"21:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1007469&key=9qfgpF7B"}]},"79":{"39728":[{"time":"11:50","available":true,"type":"reg","ad":false,"subtitled":false,"ss":true,"booking_url":"http://www.cineworld.co.uk/booking?performance=1016195&key=9qfgpF7B"},{"time":"11:50","available":true,"type":"vip","ad":false,"subtitled":false,"ss":true,"booking_url":"http://www.cineworld.co.uk/booking?performance=1016196&key=9qfgpF7B"},{"time":"13:20","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=946094&key=9qfgpF7B"},{"time":"14:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":true,"booking_url":"http://www.cineworld.co.uk/booking?performance=1016207&key=9qfgpF7B"},{"time":"14:40","available":true,"type":"vip","ad":false,"subtitled":false,"ss":true,"booking_url":"http://www.cineworld.co.uk/booking?performance=1016208&key=9qfgpF7B"},{"time":"16:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=946095&key=9qfgpF7B"},{"time":"17:30","available":true,"type":"reg","ad":false,"subtitled":false,"ss":true,"booking_url":"http://www.cineworld.co.uk/booking?performance=1016219&key=9qfgpF7B"},{"time":"17:30","available":true,"type":"vip","ad":false,"subtitled":false,"ss":true,"booking_url":"http://www.cineworld.co.uk/booking?performance=1016220&key=9qfgpF7B"},{"time":"18:40","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=946096&key=9qfgpF7B"}],"56173":[{"time":"16:00","available":false,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=983758&key=9qfgpF7B"},{"time":"17:00","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=983760&key=9qfgpF7B"}],"107709":[{"time":"12:15","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1016198&key=9qfgpF7B"},{"time":"12:15","available":true,"type":"dbox","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1016199&key=9qfgpF7B"},{"time":"15:15","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1016211&key=9qfgpF7B"},{"time":"15:15","available":true,"type":"dbox","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1016212&key=9qfgpF7B"},{"time":"18:15","available":true,"type":"dbox","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1016226&key=9qfgpF7B"},{"time":"18:15","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1016225&key=9qfgpF7B"},{"time":"20:15","available":true,"type":"reg","ad":false,"subtitled":false,"ss":true,"booking_url":"http://www.cineworld.co.uk/booking?performance=1016230&key=9qfgpF7B"},{"time":"20:15","available":true,"type":"vip","ad":false,"subtitled":false,"ss":true,"booking_url":"http://www.cineworld.co.uk/booking?performance=1016231&key=9qfgpF7B"},{"time":"21:15","available":true,"type":"reg","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1016237&key=9qfgpF7B"},{"time":"21:15","available":true,"type":"dbox","ad":false,"subtitled":false,"ss":false,"booking_url":"http://www.cineworld.co.uk/booking?performance=1016238&key=9qfgpF7B"}]}},
			films: {mocked:true, "films":[{"edi":39625,"title":"2D - Monsters University","id":6251,"classification":"U","advisory":"","poster_url":"http://www.cineworld.co.uk/assets/media/films/6251_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6251","still_url":"http://www.cineworld.co.uk/assets/media/films/6251_still.jpg","3D":false,"imax":false},{"edi":39728,"title":"3D - Monsters University","id":6251,"classification":"U","advisory":"","poster_url":"http://www.cineworld.co.uk/assets/media/films/6251_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6251","still_url":"http://www.cineworld.co.uk/assets/media/films/6251_still.jpg","3D":true,"imax":false},{"edi":43599,"title":"2D - Despicable Me 2","id":6235,"classification":"U","poster_url":"http://www.cineworld.co.uk/assets/media/films/6235_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6235","still_url":"http://www.cineworld.co.uk/assets/media/films/6235_still.jpg","3D":false,"imax":false},{"edi":56173,"title":"3D - Despicable Me 2","id":6235,"classification":"U","poster_url":"http://www.cineworld.co.uk/assets/media/films/6235_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6235","still_url":"http://www.cineworld.co.uk/assets/media/films/6235_still.jpg","3D":true,"imax":false},{"edi":63737,"title":"2D - Pacific Rim","id":6277,"classification":"12A","poster_url":"http://www.cineworld.co.uk/assets/media/films/6277_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6277","still_url":"http://www.cineworld.co.uk/assets/media/films/6277_still.jpg","3D":false,"imax":false},{"edi":107709,"title":"3D - Pacific Rim","id":6277,"classification":"12A","poster_url":"http://www.cineworld.co.uk/assets/media/films/6277_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6277","still_url":"http://www.cineworld.co.uk/assets/media/films/6277_still.jpg","3D":true,"imax":false},{"edi":143415,"title":"IMAX 3D - Pacific Rim","id":6277,"classification":"12A","poster_url":"http://www.cineworld.co.uk/assets/media/films/6277_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6277","still_url":"http://www.cineworld.co.uk/assets/media/films/6277_still.jpg","3D":true,"imax":true},{"edi":56800,"title":"Now You See Me","id":6265,"classification":"12A","advisory":"Contains moderate sex references, violence, threat and strong language.","poster_url":"http://www.cineworld.co.uk/assets/media/films/6265_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6265","still_url":"http://www.cineworld.co.uk/assets/media/films/6265_still.jpg","3D":false,"imax":false},{"edi":43683,"title":"2D - World War Z","id":6210,"classification":"15","advisory":"","poster_url":"http://www.cineworld.co.uk/assets/media/films/6210_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6210","still_url":"http://www.cineworld.co.uk/assets/media/films/6210_still.jpg","3D":false,"imax":false},{"edi":134471,"title":"3D - World War Z","id":6210,"classification":"15","advisory":"","poster_url":"http://www.cineworld.co.uk/assets/media/films/6210_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6210","still_url":"http://www.cineworld.co.uk/assets/media/films/6210_still.jpg","3D":true,"imax":false},{"edi":42665,"title":"2D - Sammy's Great Escape","id":5910,"classification":"U","advisory":"","poster_url":"http://www.cineworld.co.uk/assets/media/films/5910_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/5910","still_url":"http://www.cineworld.co.uk/assets/media/films/5910_still.jpg","3D":false,"imax":false},{"edi":136985,"title":"The Bling Ring","id":6269,"classification":"15","poster_url":"http://www.cineworld.co.uk/assets/media/films/6269_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6269","still_url":"http://www.cineworld.co.uk/assets/media/films/6269_still.jpg","3D":false,"imax":false},{"edi":63740,"title":"2D - Man Of Steel","id":6061,"classification":"12A","advisory":"","poster_url":"http://www.cineworld.co.uk/assets/media/films/6061_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6061","still_url":"http://www.cineworld.co.uk/assets/media/films/6061_still.jpg","3D":false,"imax":false},{"edi":107857,"title":"3D - Man Of Steel","id":6061,"classification":"12A","advisory":"","poster_url":"http://www.cineworld.co.uk/assets/media/films/6061_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6061","still_url":"http://www.cineworld.co.uk/assets/media/films/6061_still.jpg","3D":true,"imax":false},{"edi":110953,"title":"The Internship","id":6263,"classification":"12A","advisory":"Contains moderate sex references and one use of strong language.","poster_url":"http://www.cineworld.co.uk/assets/media/films/6263_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6263","still_url":"http://www.cineworld.co.uk/assets/media/films/6263_still.jpg","3D":false,"imax":false},{"edi":63829,"title":"This Is The End","id":6237,"classification":"15","poster_url":"http://www.cineworld.co.uk/assets/media/films/6237_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6237","still_url":"http://www.cineworld.co.uk/assets/media/films/6237_still.jpg","3D":false,"imax":false},{"edi":145175,"title":"Behind The Candelabra","id":6215,"classification":"15","poster_url":"http://www.cineworld.co.uk/assets/media/films/6215_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6215","still_url":"http://www.cineworld.co.uk/assets/media/films/6215_still.jpg","3D":false,"imax":false},{"edi":44062,"title":"2D - Epic","id":6138,"classification":"U","advisory":"","poster_url":"http://www.cineworld.co.uk/assets/media/films/6138_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6138","still_url":"http://www.cineworld.co.uk/assets/media/films/6138_still.jpg","3D":false,"imax":false},{"edi":148937,"title":"Bhaag Milkha Bhaag","id":6415,"classification":"TBC","advisory":"","poster_url":"http://www.cineworld.co.uk/assets/media/films/6415_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6415","still_url":"http://www.cineworld.co.uk/assets/media/films/6415_still.jpg","3D":false,"imax":false},{"edi":151570,"title":"Fer Mamla Gadbad Gadbad","id":6417,"classification":"12A","advisory":"","poster_url":"http://www.cineworld.co.uk/assets/media/films/6417_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6417","still_url":"http://www.cineworld.co.uk/assets/media/films/6417_still.jpg","3D":false,"imax":false},{"edi":146372,"title":"Lootera","id":6272,"classification":"TBC","advisory":"","poster_url":"http://www.cineworld.co.uk/assets/media/films/6272_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6272","still_url":"http://www.cineworld.co.uk/assets/media/films/6272_still.jpg","3D":false,"imax":false},{"edi":149976,"title":"Singam 2 (with English Subtitles)","id":6396,"classification":"12A","advisory":"","poster_url":"http://www.cineworld.co.uk/assets/media/films/6396_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6396","still_url":"http://www.cineworld.co.uk/assets/media/films/6396_still.jpg","3D":false,"imax":false},{"edi":128647,"title":"2D - All Stars","id":5890,"classification":"U","advisory":"","poster_url":"http://www.cineworld.co.uk/assets/media/films/5890_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/5890","still_url":"http://www.cineworld.co.uk/assets/media/films/5890_still.jpg","3D":false,"imax":false},{"edi":57319,"title":"2D - The Great Gatsby","id":6122,"classification":"12A","advisory":"Contains moderate sex, violence and bloody images.","poster_url":"http://www.cineworld.co.uk/assets/media/films/6122_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6122","still_url":"http://www.cineworld.co.uk/assets/media/films/6122_still.jpg","3D":false,"imax":false},{"edi":139438,"title":"3D - All Stars","id":5890,"classification":"U","advisory":"","poster_url":"http://www.cineworld.co.uk/assets/media/films/5890_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/5890","still_url":"http://www.cineworld.co.uk/assets/media/films/5890_still.jpg","3D":true,"imax":false},{"edi":139855,"title":"Before Midnight","id":6212,"classification":"15","advisory":"","poster_url":"http://www.cineworld.co.uk/assets/media/films/6212_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6212","still_url":"http://www.cineworld.co.uk/assets/media/films/6212_still.jpg","3D":false,"imax":false},{"edi":129729,"title":"Citadel","id":6424,"classification":"TBC","poster_url":"http://www.cineworld.co.uk/assets/media/films/6424_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6424","still_url":"http://www.cineworld.co.uk/assets/media/films/6424_still.jpg","3D":false,"imax":false},{"edi":139031,"title":"Ghanchakkar","id":6307,"classification":"TBC","advisory":"","poster_url":"http://www.cineworld.co.uk/assets/media/films/6307_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6307","still_url":"http://www.cineworld.co.uk/assets/media/films/6307_still.jpg","3D":false,"imax":false},{"edi":145034,"title":"Jatt & Juliet 2","id":6244,"classification":"PG","poster_url":"http://www.cineworld.co.uk/assets/media/films/6244_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6244","still_url":"http://www.cineworld.co.uk/assets/media/films/6244_still.jpg","3D":false,"imax":false},{"edi":143934,"title":"The East","id":6273,"classification":"15","advisory":"","poster_url":"http://www.cineworld.co.uk/assets/media/films/6273_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6273","still_url":"http://www.cineworld.co.uk/assets/media/films/6273_still.jpg","3D":false,"imax":false},{"edi":63735,"title":"The Hangover: Part III","id":6059,"classification":"15","advisory":"","poster_url":"http://www.cineworld.co.uk/assets/media/films/6059_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6059","still_url":"http://www.cineworld.co.uk/assets/media/films/6059_still.jpg","3D":false,"imax":false},{"edi":146666,"title":"Trap For Cinderella","id":6279,"classification":"15","poster_url":"http://www.cineworld.co.uk/assets/media/films/6279_poster.jpg","film_url":"http://www.cineworld.co.uk/whatson/6279","still_url":"http://www.cineworld.co.uk/assets/media/films/6279_still.jpg","3D":false,"imax":false}]} ,
			cinemas: {mocked:true, "cinemas":[{"id":1,"name":"Aberdeen - Queens Links","cinema_url":"http://www.cineworld.co.uk/cinemas/1/information","address":"Queens Links Leisure Park, Links Road, Aberdeen","postcode":"AB24 5EN","telephone":"0871 200 2000"},{"id":78,"name":"Aberdeen - Union Square","cinema_url":"http://www.cineworld.co.uk/cinemas/78/information","address":"26 First Level Mall, Union Square, Guild Square, Aberdeen","postcode":"AB11 5RG","telephone":"0871 200 2000"},{"id":87,"name":"Aldershot","cinema_url":"http://www.cineworld.co.uk/cinemas/87/information","address":"Westgate, Aldershot","postcode":"GU11 1WG","telephone":"0871 200 2000"},{"id":12,"name":"Ashford","cinema_url":"http://www.cineworld.co.uk/cinemas/12/information","address":"Eureka Entertainment Centre, Ashford, Kent","postcode":"TN25 4BN","telephone":"0871 200 2000"},{"id":23,"name":"Ashton-under-Lyne","cinema_url":"http://www.cineworld.co.uk/cinemas/23/information","address":"Ashton Leisure Park, Fold Way, Off Lord Sheldon Way","postcode":"OL7 0PG","telephone":"0871 200 2000"},{"id":34,"name":"Bedford","cinema_url":"http://www.cineworld.co.uk/cinemas/34/information","address":"Aspects Leisure Centre, Newnham Avenue, Bedford","postcode":"MK41 9LW","telephone":"0871 200 2000"},{"id":56,"name":"Birmingham","cinema_url":"http://www.cineworld.co.uk/cinemas/56/information","address":"181 Broad Street, Birmingham","postcode":"B15 1DA","telephone":"0871 200 2000"},{"id":67,"name":"Boldon Tyne and Wear","cinema_url":"http://www.cineworld.co.uk/cinemas/67/information","address":"Abingdon Way, Boldon Leisure Park, Boldon Colliery","postcode":"NE35 9PB","telephone":"0871 200 2000"},{"id":72,"name":"Bolton","cinema_url":"http://www.cineworld.co.uk/cinemas/72/information","address":"The Valley, 15 Eagley Brook Way, Bolton","postcode":"BL1 8TS","telephone":"0871 200 2000"},{"id":73,"name":"Bradford","cinema_url":"http://www.cineworld.co.uk/cinemas/73/information","address":"Bradford Leisure Exchange, Vicar Lane, Bradford","postcode":"BD1 5LD","telephone":"0871 200 2000"},{"id":2,"name":"Braintree","cinema_url":"http://www.cineworld.co.uk/cinemas/2/information","address":"Freeport Leisure, Charter Way, Braintree, Essex","postcode":"CM77 8YH","telephone":"0871 200 2000"},{"id":3,"name":"Brighton","cinema_url":"http://www.cineworld.co.uk/cinemas/3/information","address":"Brighton Marina, Brighton, East Sussex","postcode":"BN2 5UF","telephone":"0871 200 2000"},{"id":4,"name":"Bristol","cinema_url":"http://www.cineworld.co.uk/cinemas/4/information","address":"Hengrove Leisure Park, Hengrove Way, Bristol","postcode":"BS14 0HR","telephone":"0871 200 2000"},{"id":5,"name":"Burton upon Trent","cinema_url":"http://www.cineworld.co.uk/cinemas/5/information","address":"Middle Way Park, Guild St, Burton upon Trent","postcode":"DE14 1NQ","telephone":"0871 200 2000"},{"id":6,"name":"Bury St. Edmunds","cinema_url":"http://www.cineworld.co.uk/cinemas/6/information","address":"Parkway, Bury St. Edmunds","postcode":"IP33 3BA","telephone":"0871 200 2000"},{"id":7,"name":"Cambridge","cinema_url":"http://www.cineworld.co.uk/cinemas/7/information","address":"Cambridge Leisure Park, Clifton Way, Cambridge","postcode":"CB1 7DY","telephone":"0871 200 2000"},{"id":8,"name":"Cardiff","cinema_url":"http://www.cineworld.co.uk/cinemas/8/information","address":"Mary Ann Street, Cardiff","postcode":"CF10 2EN","telephone":"0871 200 2000"},{"id":9,"name":"Castleford","cinema_url":"http://www.cineworld.co.uk/cinemas/9/information","address":"Xscape, Colorado Way, Castleford, West Yorkshire","postcode":"WF10 4TA","telephone":"0871 200 2000"},{"id":11,"name":"Cheltenham","cinema_url":"http://www.cineworld.co.uk/cinemas/11/information","address":"The Brewery, Oxford Passage, St Margaret's Road, Cheltenham","postcode":"GL50 4EF","telephone":"0871 200 2000"},{"id":13,"name":"Chester","cinema_url":"http://www.cineworld.co.uk/cinemas/13/information","address":"Chaser Court, Greyhound Retail Park, Sealand Road","postcode":"CH1 4QQ","telephone":"0871 200 2000"},{"id":14,"name":"Chesterfield","cinema_url":"http://www.cineworld.co.uk/cinemas/14/information","address":"Alma Leisure Park, Derby Road, Chesterfield, Derby","postcode":"S40 2ED","telephone":"0871 200 2000"},{"id":15,"name":"Chichester","cinema_url":"http://www.cineworld.co.uk/cinemas/15/information","address":"Chichester Gate, Chichester, West Sussex","postcode":"PO19 8EL","telephone":"0871 200 2000"},{"id":16,"name":"Crawley","cinema_url":"http://www.cineworld.co.uk/cinemas/16/information","address":"Unit 1-Crawley Leisure Park, London Road, Crawley","postcode":"RH10 8LR","telephone":"0871 200 2000"},{"id":17,"name":"Didcot","cinema_url":"http://www.cineworld.co.uk/cinemas/17/information","address":"27 Station Road, Didcot, Oxfordshire","postcode":"OX11 7ND","telephone":"0871 200 2000"},{"id":18,"name":"Didsbury","cinema_url":"http://www.cineworld.co.uk/cinemas/18/information","address":"Parrs Wood Entertainment Centre, Wilmslow Road, East Didsbury, Manchester","postcode":"M20 5PG","telephone":"0871 200 2000"},{"id":19,"name":"Dundee","cinema_url":"http://www.cineworld.co.uk/cinemas/19/information","address":"Camperdown Leisure Park, Kingsway West, Dundee","postcode":"DD2 4TF","telephone":"0871 200 2000"},{"id":20,"name":"Eastbourne","cinema_url":"http://www.cineworld.co.uk/cinemas/20/information","address":"Sovereign Harbour Retail Park, Pevensey Bay Road","postcode":"BN23 6JH","telephone":"0871 200 2000"},{"id":21,"name":"Edinburgh","cinema_url":"http://www.cineworld.co.uk/cinemas/21/information","address":"Fountain Park,130/3 Dundee Street, Edinburgh","postcode":"EH11 1AF","telephone":"0871 200 2000"},{"id":24,"name":"Falkirk","cinema_url":"http://www.cineworld.co.uk/cinemas/24/information","address":"Central Retail Park, Old Bison Works, Falkirk","postcode":"FK1 1LW","telephone":"0871 200 2000"},{"id":27,"name":"Glasgow - Parkhead","cinema_url":"http://www.cineworld.co.uk/cinemas/27/information","address":"Forge Shopping Centre, 1221 Gallowgate, Glasgow","postcode":"G31 4EB","telephone":"0871 200 2000"},{"id":28,"name":"Glasgow - Renfrew Street","cinema_url":"http://www.cineworld.co.uk/cinemas/28/information","address":"7 Renfrew Street, Glasgow","postcode":"G2 3AB","telephone":"0871 200 2000"},{"id":29,"name":"Gloucester","cinema_url":"http://www.cineworld.co.uk/cinemas/29/information","address":"The Peel Centre, St Ann Way, Bristol Road, Gloucester","postcode":"GL1 5SF","telephone":"0871 200 2000"},{"id":31,"name":"Harlow","cinema_url":"http://www.cineworld.co.uk/cinemas/31/information","address":"Queensgate Centre, Edinburgh Way, Harlow, Essex","postcode":"CM20 2DA","telephone":"0871 200 2000"},{"id":76,"name":"Haverhill","cinema_url":"http://www.cineworld.co.uk/cinemas/76/information","address":"Leisure & Retail Complex, Ehringshausen Way","postcode":"CB9 0ER","telephone":"0871 200 2000"},{"id":33,"name":"High Wycombe","cinema_url":"http://www.cineworld.co.uk/cinemas/33/information","address":"Denmark Street, Eden, High Wycombe","postcode":"HP11 2DB","telephone":"0871 200 2000"},{"id":35,"name":"Hull","cinema_url":"http://www.cineworld.co.uk/cinemas/35/information","address":"Gibraltar Road, Kingswood Retail Park, Hull","postcode":"HU7 3DB","telephone":"0871 200 2000"},{"id":36,"name":"Huntingdon","cinema_url":"http://www.cineworld.co.uk/cinemas/36/information","address":"Tower Field Leisure Park, Abbots Ripton Road, Hunt","postcode":"PE29 7EG","telephone":"0871 200 2000"},{"id":38,"name":"Ipswich","cinema_url":"http://www.cineworld.co.uk/cinemas/38/information","address":"Cardinal Park, 11 Grafton Way, Ipswich, Suffolk","postcode":"IP1 1AX","telephone":"0871 200 2000"},{"id":39,"name":"Isle Of Wight","cinema_url":"http://www.cineworld.co.uk/cinemas/39/information","address":"Coppins Bridge, Newport, Isle of Wight","postcode":"PO30 2TA","telephone":"0871 200 2000"},{"id":40,"name":"Jersey","cinema_url":"http://www.cineworld.co.uk/cinemas/40/information","address":"The Waterfront Centre, La Rue de L'Etau, St Helier","postcode":"JE2 4HE","telephone":"0871 200 2000"},{"id":83,"name":"Leigh","cinema_url":"http://www.cineworld.co.uk/cinemas/83/information","address":"The Loom, Spinning Jenny Way, Leigh","postcode":"WN7 4PE","telephone":"0871 200 2000"},{"id":41,"name":"Liverpool","cinema_url":"http://www.cineworld.co.uk/cinemas/41/information","address":"Montrose Way, Edge Lane Retail Park, Liverpool","postcode":"L13 1EW","telephone":"0871 200 2000"},{"id":42,"name":"Llandudno","cinema_url":"http://www.cineworld.co.uk/cinemas/42/information","address":"Junction Leisure Park, Off Junction Way, Llandudno Junction","postcode":"LL31 9XX","telephone":"0871 200 2000"},{"id":45,"name":"London - Bexleyheath","cinema_url":"http://www.cineworld.co.uk/cinemas/45/information","address":"28-70 Broadway, Bexleyheath, Kent","postcode":"DA6 7LL","telephone":"0871 200 2000"},{"id":10,"name":"London - Chelsea","cinema_url":"http://www.cineworld.co.uk/cinemas/10/information","address":"279 Kings Road,Chelsea, London","postcode":"SW3 5EW","telephone":"0871 200 2000"},{"id":22,"name":"London - Enfield","cinema_url":"http://www.cineworld.co.uk/cinemas/22/information","address":"Southbury Leisure Park, 208 Southbury Road, Enfield","postcode":"EN1 1YQ","telephone":"0871 200 2000"},{"id":25,"name":"London - Feltham","cinema_url":"http://www.cineworld.co.uk/cinemas/25/information","address":"Leisure West, Air Park Way, Feltham, Middx","postcode":"TW13 7LX","telephone":"0871 200 2000"},{"id":26,"name":"London - Fulham Road","cinema_url":"http://www.cineworld.co.uk/cinemas/26/information","address":"142 Fulham Road, London","postcode":"SW10 9QR","telephone":"0871 200 2000"},{"id":30,"name":"London - Hammersmith","cinema_url":"http://www.cineworld.co.uk/cinemas/30/information","address":"207 King Street, Hammersmith, London","postcode":"W6 9JT","telephone":"0871 200 2000"},{"id":32,"name":"London - Haymarket","cinema_url":"http://www.cineworld.co.uk/cinemas/32/information","address":"63-65 Haymarket, London","postcode":"SW1Y 4RL","telephone":"0871 200 2000"},{"id":37,"name":"London - Ilford","cinema_url":"http://www.cineworld.co.uk/cinemas/37/information","address":"I-Scene, Clements Road, Ilford, Essex","postcode":"IG1 1BP","telephone":"0871 200 2000"},{"id":53,"name":"London - Shaftesbury Avenue","cinema_url":"http://www.cineworld.co.uk/cinemas/53/information","address":"13 Coventry Street, Piccadilly, London","postcode":"W1D 7DH","telephone":"0871 200 2000"},{"id":60,"name":"London - Staples Corner","cinema_url":"http://www.cineworld.co.uk/cinemas/60/information","address":"Staples Corner Retail Park, Geron Way, London","postcode":"NW2 6LW","telephone":"0871 200 2000"},{"id":79,"name":"London - The O2, Greenwich ","cinema_url":"http://www.cineworld.co.uk/cinemas/79/information","address":"The O2, Peninsula Square, London","postcode":"SE10 0DX","telephone":"0871 200 2000"},{"id":65,"name":"London - Wandsworth","cinema_url":"http://www.cineworld.co.uk/cinemas/65/information","address":"Southside Shopping Centre, Wandsworth High Street,","postcode":"SW18 4TF","telephone":"0871 200 2000"},{"id":66,"name":"London - West India Quay","cinema_url":"http://www.cineworld.co.uk/cinemas/66/information","address":"Hertsmere Road, West India Quay, London","postcode":"E14 4AL","telephone":"0871 200 2000"},{"id":70,"name":"London - Wood Green","cinema_url":"http://www.cineworld.co.uk/cinemas/70/information","address":"Wood Green Shopping City, Off Noel Park Road, Wood Green","postcode":"N22 6LU","telephone":"0871 200 2000"},{"id":43,"name":"Luton","cinema_url":"http://www.cineworld.co.uk/cinemas/43/information","address":"The Galaxy, Bridge Street, Luton,","postcode":"LU1 2NB","telephone":"0871 200 2000"},{"id":44,"name":"Middlesbrough","cinema_url":"http://www.cineworld.co.uk/cinemas/44/information","address":"Middlesbrough Leisure Park, Marton Road, Middlesb","postcode":"TS1 2DY","telephone":"0871 200 2000"},{"id":46,"name":"Milton Keynes","cinema_url":"http://www.cineworld.co.uk/cinemas/46/information","address":"Xscape, 602 Marlborough Gate, Central Milton Keynes","postcode":"MK9 3XS","telephone":"0871 200 2000"},{"id":47,"name":"Newport Wales","cinema_url":"http://www.cineworld.co.uk/cinemas/47/information","address":"Newport Retail Park, Seven Styles Avenue, Spytty","postcode":"NP19 4QQ","telephone":"0871 200 2000"},{"id":48,"name":"Northampton","cinema_url":"http://www.cineworld.co.uk/cinemas/48/information","address":"Sixfields Leisure, Weedon Road, Upton, Northampton","postcode":"NN5 5QJ","telephone":"0871 200 2000"},{"id":49,"name":"Nottingham","cinema_url":"http://www.cineworld.co.uk/cinemas/49/information","address":"The Corner House, 29 Forman Street, Nottingham","postcode":"NG1 4AA","telephone":"0871 200 2000"},{"id":50,"name":"Rochester","cinema_url":"http://www.cineworld.co.uk/cinemas/50/information","address":"Medway Valley Leisure Park, Chariot Way, Strood,","postcode":"ME2 2SS","telephone":"0871 200 2000"},{"id":51,"name":"Rugby","cinema_url":"http://www.cineworld.co.uk/cinemas/51/information","address":"Junction One Retail & Leisure Park, Leicester Rd, Rugby, Warwickshire","postcode":"CV21 1RW","telephone":"0871 200 2000"},{"id":52,"name":"Runcorn","cinema_url":"http://www.cineworld.co.uk/cinemas/52/information","address":"Trident Park, Halton Lea, Runcorn","postcode":"WA7 2FQ","telephone":"0871 200 2000"},{"id":54,"name":"Sheffield","cinema_url":"http://www.cineworld.co.uk/cinemas/54/information","address":"Valley Centertainment, Broughton Lane, Sheffield,","postcode":"S9 2EP","telephone":"0871 200 2000"},{"id":55,"name":"Shrewsbury","cinema_url":"http://www.cineworld.co.uk/cinemas/55/information","address":"Old Potts Way, Shrewsbury","postcode":"SY3 7ET","telephone":"0871 200 2000"},{"id":57,"name":"Solihull","cinema_url":"http://www.cineworld.co.uk/cinemas/57/information","address":"47 Mill Lane Arcade (Upper), Touchwood, Solihull,","postcode":"B91 3GS","telephone":"0871 200 2000"},{"id":58,"name":"Southampton","cinema_url":"http://www.cineworld.co.uk/cinemas/58/information","address":"Ocean Village, 4 Ocean Way, Southampton, Hampshire","postcode":"SO14 3TJ","telephone":"0871 200 2000"},{"id":59,"name":"St Helens","cinema_url":"http://www.cineworld.co.uk/cinemas/59/information","address":"Chalon Way West, St Helens","postcode":"WA10 1BF","telephone":"0871 200 2000"},{"id":61,"name":"Stevenage","cinema_url":"http://www.cineworld.co.uk/cinemas/61/information","address":"Unit 4, Stevenage Leisure Park, Kings Way, Stevenage","postcode":"SG1 2UA","telephone":"0871 200 2000"},{"id":62,"name":"Stockport","cinema_url":"http://www.cineworld.co.uk/cinemas/62/information","address":"4 Grand Central Square, Wellington Road South, St","postcode":"SK1 3TA","telephone":"0871 200 2000"},{"id":63,"name":"Swindon","cinema_url":"http://www.cineworld.co.uk/cinemas/63/information","address":"Shaw Ridge Leisure Park, Whitehill Way, Swindon","postcode":"SN5 7DN","telephone":"0871 200 2000"},{"id":64,"name":"Wakefield","cinema_url":"http://www.cineworld.co.uk/cinemas/64/information","address":"Westgate Retail and Leisure Park, Colinsway, Off C","postcode":"WF2 9SH","telephone":"0871 200 2000"},{"id":68,"name":"Weymouth","cinema_url":"http://www.cineworld.co.uk/cinemas/68/information","address":"New Bond St, Weymouth","postcode":"DT4 8LY","telephone":"0871 200 2000"},{"id":77,"name":"Witney","cinema_url":"http://www.cineworld.co.uk/cinemas/77/information","address":"Marriotts Walk, Witney, Oxon","postcode":"OX28 6GW","telephone":"0871 200 2000"},{"id":69,"name":"Wolverhampton","cinema_url":"http://www.cineworld.co.uk/cinemas/69/information","address":"Bentley Bridge Leisure Park, Wednesfield Way","postcode":"WV11 1TZ","telephone":"0871 200 2000"},{"id":71,"name":"Yeovil","cinema_url":"http://www.cineworld.co.uk/cinemas/71/information","address":"Unit 1 Yeo Leisure Park, Old Station Way, Yeovil,","postcode":"BA20 1NP","telephone":"0871 200 2000"}]}
		},
		internal: {
			films: {mocked:true, "films":[{"edi":39625,"title":"2D - Monsters University","id":6343,"cert":"U","advisory":"","poster":"/assets/media/films/6251_poster.jpg","length":110,"release":"20130712","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Monsters University - New Trailer - Disney Pixar Official HD_1_qtp.mp4","actors":"Billy Crystal, John Goodman, Steve Buscemi, Helen Mirren, Alfred Molina, Nathan Fillion","weighted":59},{"edi":39728,"title":"3D - Monsters University","id":6342,"cert":"U","advisory":"","poster":"/assets/media/films/6251_poster.jpg","length":110,"release":"20130712","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Monsters University - New Trailer - Disney Pixar Official HD_1_qtp.mp4","actors":"Billy Crystal, John Goodman, Steve Buscemi, Helen Mirren, Alfred Molina, Nathan Fillion","weighted":59},{"edi":43599,"title":"2D - Despicable Me 2","id":6322,"cert":"U","poster":"/assets/media/films/6235_poster.jpg","length":98,"release":"20130628","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Despicable Me 2 _qtp.mp4","actors":"Steve Carell, Al Pacino, Kristen Wiig, Ken Jeong, Steve Coogan, Russell Brand, Miranda Cosgrove","weighted":58},{"edi":56173,"title":"3D - Despicable Me 2","id":6323,"cert":"U","poster":"/assets/media/films/6235_poster.jpg","length":98,"release":"20130628","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Despicable Me 2 _qtp.mp4","actors":"Steve Carell, Al Pacino, Kristen Wiig, Ken Jeong, Steve Coogan, Russell Brand, Miranda Cosgrove","weighted":58},{"edi":63737,"title":"2D - Pacific Rim","id":6376,"cert":"12A","poster":"/assets/media/films/6277_poster.jpg","length":131,"release":"20130712","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/PACIFIC-RIM_qtp.mp4","actors":"Charlie Hunnam, Ron Perlman, Idris Elba, Charlie Day, Rinko Kikuchi","weighted":57},{"edi":107709,"title":"3D - Pacific Rim","id":6377,"cert":"12A","poster":"/assets/media/films/6277_poster.jpg","length":131,"release":"20130712","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/PACIFIC-RIM_qtp.mp4","actors":"Charlie Hunnam, Ron Perlman, Idris Elba, Charlie Day, Rinko Kikuchi","weighted":57},{"edi":143415,"title":"IMAX 3D - Pacific Rim","id":6378,"cert":"12A","poster":"/assets/media/films/6277_poster.jpg","length":131,"release":"20130712","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/PACIFIC-RIM_qtp.mp4","actors":"Charlie Hunnam, Ron Perlman, Idris Elba, Charlie Day, Rinko Kikuchi","weighted":57},{"edi":56800,"title":"Now You See Me","id":6364,"cert":"12A","advisory":"Contains moderate sex references, violence, threat and strong language.","poster":"/assets/media/films/6265_poster.jpg","length":115,"release":"20130703","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Now You See Me _qtp.mp4","actors":"Morgan Freeman, Isla Fisher, Mark Ruffalo, Woody Harrelson, Jesse Eisenberg, Dave Franco, Michael Caine","weighted":56},{"edi":43683,"title":"2D - World War Z","id":6295,"cert":"15","advisory":"","poster":"/assets/media/films/6210_poster.jpg","release":"20130621","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/WORLD WAR Z - Official Teaser Trailer - United Kingdom_qtp.mp4","actors":"Brad Pitt, Mireille Enos, James Badge Dale, Matthew Fox","weighted":55},{"edi":134471,"title":"3D - World War Z","id":6296,"cert":"15","advisory":"","poster":"/assets/media/films/6210_poster.jpg","release":"20130621","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/WORLD WAR Z - Official Teaser Trailer - United Kingdom_qtp.mp4","actors":"Brad Pitt, Mireille Enos, James Badge Dale, Matthew Fox","weighted":55},{"edi":42665,"title":"2D - Sammy's Great Escape","id":5933,"cert":"U","advisory":"","poster":"/assets/media/films/5910_poster.jpg","length":93,"release":"20130215","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/ Sammys Great Escape Trailer _qtp.mp4","actors":"Pat Carroll, Carlos McCullers II, Isabelle Fuhrman","categories":["junior"],"weighted":46},{"edi":136985,"title":"The Bling Ring","id":6368,"cert":"15","poster":"/assets/media/films/6269_poster.jpg","length":90,"release":"20130705","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/The Bling Ring - UK Main Trailer_qtp.mp4","actors":"Emma Watson, Taissa Farmiga, Israel Broussard, Leslie Mann, Claire Julien, Katie Chang","weighted":31},{"edi":63740,"title":"2D - Man Of Steel","id":6123,"cert":"12A","advisory":"","poster":"/assets/media/films/6061_poster.jpg","length":143,"release":"20130614","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/cineworld_qtp.mp4","actors":"Henry Cavill, Amy Adams, Russell Crowe, Kevin Costner, Diane Lane, Michael Shannon","weighted":30},{"edi":107857,"title":"3D - Man Of Steel","id":6268,"cert":"12A","advisory":"","poster":"/assets/media/films/6061_poster.jpg","length":143,"release":"20130614","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/cineworld_qtp.mp4","actors":"Henry Cavill, Amy Adams, Russell Crowe, Kevin Costner, Diane Lane, Michael Shannon","weighted":30},{"edi":110953,"title":"The Internship","id":6362,"cert":"12A","advisory":"Contains moderate sex references and one use of strong language.","poster":"/assets/media/films/6263_poster.jpg","length":119,"release":"20130703","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/The Internship trailer_qtp.mp4","actors":"Vince Vaughn, Owen Wilson, Rose Byrne, Max Minghella, John Goodman","weighted":29},{"edi":63829,"title":"This Is The End","id":6326,"cert":"15","poster":"/assets/media/films/6237_poster.jpg","length":107,"release":"20130628","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/THISISTHEEND_qtp.mp4","actors":"James Franco, Paul Rudd, Seth Rogen, Emma Watson, Jonah Hill, Jason Segel, Jay Baruchel, Michael Cera, Christopher Mintz-Plasse, Danny McBride","weighted":28},{"edi":145175,"title":"Behind The Candelabra","id":6302,"cert":"15","poster":"/assets/media/films/6215_poster.jpg","length":118,"release":"20130607","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Behind the Candelabra - In UK Cinemas 7th June_qtp.mp4","actors":"Michael Douglas, Matt Damon, Dan Aykroyd, Debbie Reynolds","weighted":26},{"edi":44062,"title":"2D - Epic","id":6213,"cert":"U","advisory":"","poster":"/assets/media/films/6138_poster.jpg","length":102,"release":"20130524","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Epic_qtp.mp4","actors":"Amanda Seyfried, Josh Hutcherson, Colin Farrell, Christoph Waltz, Jason Sudeikis","weighted":25},{"edi":148937,"title":"Bhaag Milkha Bhaag","id":6526,"cert":"TBC","advisory":"","poster":"/assets/media/films/6415_poster.jpg","release":"20130712","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/360p stereo - Bhaag Milkha Bhaag official trailer  Farhan Akhtar  Sonam Kapoor.mp4","actors":"Farhan Akhtar, Sonam Kapoor","categories":["bollywood"],"weighted":19},{"edi":151570,"title":"Fer Mamla Gadbad Gadbad","id":6528,"cert":"12A","advisory":"","poster":"/assets/media/films/6417_poster.jpg","release":"20130712","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/360p stereo 3D - Fer Mamla Gadbad Gadbad  FMGG Official Movie Trailer  Roshan Prince  Japji Khaira  PTC.mp4","actors":"Roshan Prince, BhanuShree Mehra, Japji Khaira","categories":["bollywood"],"weighted":17},{"edi":146372,"title":"Lootera","id":6371,"cert":"TBC","advisory":"","poster":"/assets/media/films/6272_poster.jpg","release":"20130705","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Lootera_qtp.mp4","actors":"Ranveer Singh, Sonakshi Sinha","categories":["bollywood"],"weighted":14},{"edi":149976,"title":"Singam 2 (with English Subtitles)","id":6505,"cert":"12A","advisory":"","poster":"/assets/media/films/6396_poster.jpg","length":160,"release":"20130705","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Singam 2 Promo Ayngaran HD.mp4","weighted":10},{"edi":128647,"title":"2D - All Stars","id":5908,"cert":"U","advisory":"","poster":"/assets/media/films/5890_poster.jpg","length":106,"release":"20130503","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/All Stars - Official Teaser Trailer_qtp.mp4","actors":"Akai - Osei Mansfield, Theo Stevenson, Ashley Walters, Ashley Jensen","categories":["junior"],"weighted":0},{"edi":57319,"title":"2D - The Great Gatsby","id":6191,"cert":"12A","advisory":"Contains moderate sex, violence and bloody images.","poster":"/assets/media/films/6122_poster.jpg","length":143,"release":"20130516","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/The Great Gatsby _qtp.mp4","actors":"Leonardo DiCaprio, Tobey Maguire, Carey Mulligan, Joel Edgerton, Amitabh Bachchan","weighted":0},{"edi":139438,"title":"3D - All Stars","id":6338,"cert":"U","advisory":"","poster":"/assets/media/films/5890_poster.jpg","length":106,"release":"20130503","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/All Stars - Official Teaser Trailer_qtp.mp4","actors":"Akai - Osei Mansfield, Theo Stevenson, Ashley Walters, Ashley Jensen","categories":["junior"],"weighted":0},{"edi":139855,"title":"Before Midnight","id":6299,"cert":"15","advisory":"","poster":"/assets/media/films/6212_poster.jpg","length":109,"release":"20130621","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Before Midnight_qtp.mp4","actors":"Ethan Hawke, Julie Delpy","weighted":0},{"edi":129729,"title":"Citadel","id":6535,"cert":"TBC","poster":"/assets/media/films/6424_poster.jpg","release":"20130712","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/360p stereo - CITADEL Trailer - In UK Cinemas July 12th.mp4","actors":"James Cosmo, Aneurin Barnard, Amy Shiels, Wunmi Mosaku","weighted":0},{"edi":139031,"title":"Ghanchakkar","id":6411,"cert":"TBC","advisory":"","poster":"/assets/media/films/6307_poster.jpg","release":"20130628","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Ghanchakkar_THEATRICAL_Subtitle_qtp.mp4","actors":"Emraan Hashmi, Vidya Balan, Rajesh Sharma","categories":["bollywood"],"weighted":0},{"edi":145034,"title":"Jatt & Juliet 2","id":6333,"cert":"PG","poster":"/assets/media/films/6244_poster.jpg","length":138,"release":"20130628","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Jatt  Juliet 2 _qtp.mp4","actors":"Diljit Dosanjh, Neeru Bajwa, Rana Jung Bahadur, Jaswinder Bhalla, Amrit Bhilla, Devinder Dillon, Julia Fox, Brad Harder, Jacob Insley, Hitesh Jogia","categories":["bollywood"],"weighted":0},{"edi":143934,"title":"The East","id":6372,"cert":"15","advisory":"","poster":"/assets/media/films/6273_poster.jpg","length":116,"release":"20130628","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/THE EAST _ Official Trailer_qtp.mp4","actors":"Brit Marling, Alexander Skarsgard, Ellen Page, Patricia Clarkson, Toby Kebbell","weighted":0},{"edi":63735,"title":"The Hangover: Part III","id":6121,"cert":"15","advisory":"","poster":"/assets/media/films/6059_poster.jpg","length":100,"release":"20130523","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/The Hangover Part 3 _qtp.mp4","actors":"Bradley Cooper, Ed Helms, Zach Galifianakis, Justin Bartha","weighted":0},{"edi":146666,"title":"Trap For Cinderella","id":6382,"cert":"15","poster":"/assets/media/films/6279_poster.jpg","length":100,"release":"20130712","trailer":"http://webcache1.bbccustomerpublishing.com/cineworld/trailers/Trap For Cinderella Official Trailer HD_qtp.mp4","actors":"Tuppence Middleton, Alexandra Roach, Kerry Fox, Aneurin Barnard, Alex Jennings","weighted":0}],"base_url":"http://www.cineworld.co.uk"} 
		},
		replaceAjax: function mock(options) {
			var options = $.extend({
				mockFilmQuickbook: true,
				mockFilmInternal: true,
				mockCinemas: true,
				mockPerformances: true
			}, options);
			var $ajax = $.ajax;
			$.ajax = function(params) {
				var result;
				if(options.mockFilmQuickbook && /quickbook\/films$/.test(params.url)) {
					console.debug("Returning mock quickbook films: " + JSON.stringify(params));
					result = twister.mock.cineworld.quickbook.films;
				} else if(options.mockFilmInternal && /api\/film\/list$/.test(params.url)) {
					console.debug("Returning mock internal films: " + JSON.stringify(params));
					result = twister.mock.cineworld.internal.films;
				} else if (options.mockCinemas && /\/cinemas$/.test(params.url)) {
					console.debug("Returning mock cinemas: " + JSON.stringify(params));
					restult = twister.mock.cineworld.quickbook.cinemas;
				} else if (options.mockPerformances && /\/performances$/.test(params.url)
					&& twister.mock.cineworld.quickbook.performances[params.data.cinema] != undefined
					&& twister.mock.cineworld.quickbook.performances[params.data.cinema][params.data.film] != undefined) {
					//console.debug("Returning mock performances: " + JSON.stringify(params));
					var perfs = twister.mock.cineworld.quickbook.performances[params.data.cinema][params.data.film];
					result = { mocked: true, performances: perfs };
				}
				if (result != undefined) {
					//params.success(result);
					return result;
				} else {
					return $ajax(params);
				}
			}
		}
	});
	twister.mock.imdb = $.extend(twister.mock.imdb || {}, {
		// http://deanclatworthy.com/imdb/?q=Bhaag+Milkha+Bhaag&type=jsonp&callback=callback148937imdbapi1374015239618&_=1374015238787
		films: {
			"Bhaag Milkha Bhaag":       {mocked:true,"imdbid":"tt2356180","imdburl":"http://www.imdb.com/title/tt2356180/","genres":"Biography,Drama,History,Sport","languages":"Hindi","country":"India","votes":"1384","stv":0,"series":0,"rating":"8.0","runtime":"188min","title":"Bhaag Milkha Bhaag","year":"2013","usascreens":0,"ukscreens":0,"cacheExpiry":1374350446},
			"World War Z":              {mocked:true,"imdbid":"tt0816711","imdburl":"http://www.imdb.com/title/tt0816711/","genres":"Action,Drama,Horror,Sci-Fi,Thriller","languages":"English","country":"USA,Malta","votes":"67357","stv":0,"series":0,"rating":"7.3","runtime":"116min","title":"World War Z","year":"2013","usascreens":3607,"ukscreens":0,"cacheExpiry":1374104898},
			"Ghanchakkar":              {mocked:true,"imdbid":"tt2246724","imdburl":"http://www.imdb.com/title/tt2246724/","genres":"Comedy,Crime,Romance,Thriller","languages":"Hindi","country":"India","votes":"933","stv":0,"series":0,"rating":"5.5","runtime":"137min","title":"Ghanchakkar","year":"2013","usascreens":89,"ukscreens":0,"cacheExpiry":1374589505},
			"Fer Mamla Gadbad Gadbad":  {mocked:true,"imdbid":"tt2949246","imdburl":"http://www.imdb.com/title/tt2949246/","genres":"Comedy,Romance","languages":"Panjabi","country":"India","votes":0,"stv":0,"series":0,"rating":"n/a","runtime":"n/a","title":"Fer Mamla Gadbad Gadbad","year":"2013","usascreens":0,"ukscreens":0,"cacheExpiry":1374295964},
			"Citadel":                  {mocked:true,"imdbid":"tt1641975","imdburl":"http://www.imdb.com/title/tt1641975/","genres":"Drama,Horror,Thriller","languages":"English","country":"Ireland,UK","votes":"2788","stv":0,"series":0,"rating":"5.3","runtime":"84min","title":"Citadel","year":"2012","usascreens":0,"ukscreens":0,"cacheExpiry":1374267645},
			"Lootera":                  {mocked:true,"imdbid":"tt2224317","imdburl":"http://www.imdb.com/title/tt2224317/","genres":"Drama,Romance","languages":"Hindi","country":"India","votes":"1437","stv":0,"series":0,"rating":"7.6","runtime":"136min","title":"Lootera","year":"2013","usascreens":0,"ukscreens":0,"cacheExpiry":1374097200},
			"A.C.O.D.":                 {mocked:true,"imdbid":"tt1311060","imdburl":"http://www.imdb.com/title/tt1311060/","genres":"Comedy","languages":"English","country":"USA","votes":"155","stv":0,"series":0,"rating":"6.5","runtime":"90min","title":"A.C.O.D.","year":"2013","usascreens":0,"ukscreens":0,"cacheExpiry":1374999563},
			"Ramaiya Vastavaiya":       {mocked:true,"imdbid":"tt2357926","imdburl":"http://www.imdb.com/title/tt2357926/","genres":"Comedy,Family,Romance","languages":"Hindi","country":"India","votes":"128","stv":0,"series":0,"rating":"4.3","runtime":"148min","title":"Ramaiya Vastavaiya","year":"2013","usascreens":0,"ukscreens":0,"cacheExpiry":1374999291},
			"The Frozen Ground":        {mocked:true,"imdbid":"tt2005374","imdburl":"http://www.imdb.com/title/tt2005374/","genres":"Crime,Thriller","languages":"English","country":"USA","votes":"241","stv":0,"series":0,"rating":"6.9","runtime":"105min","title":"The Frozen Ground","year":"2013","usascreens":0,"ukscreens":0,"cacheExpiry":1374793022},
			"Wadjda":                   {mocked:true,"imdbid":"tt2258858","imdburl":"http://www.imdb.com/title/tt2258858/","genres":"Drama","languages":"Arabic","country":"Saudi Arabia,Germany","votes":"830","stv":0,"series":0,"rating":"7.7","runtime":"98min","title":"Wadjda","year":"2012","usascreens":0,"ukscreens":0,"cacheExpiry":1374972699},
			error:                      {mocked:true,"code":2,"error":"Exceeded API usage limit"}
		},
		replaceAjax: function mock(options) {
			var options = $.extend({
				mockIMDB: true
			}, options);
			var $ajax = $.ajax;
			$.ajax = function(params) {
				if(options.mockIMDB && /deanclatworthy/.test(params.url)
					&& twister.mock.imdb.films[params.data.q] != undefined) {
					console.debug("Returning mock IMDB film: " + JSON.stringify(params));
					var result = twister.mock.imdb.films[params.data.q];
					//params.success(result);
					return result;
				} else {
					return $ajax(params);
				}
			}
		}
	});

	twister.mock.cineworld.replaceAjax({
		//mockFilmQuickbook: false,
		//mockFilmInternal: false,
		mockCinemas: false
	});
	twister.mock.imdb.replaceAjax({
		mockIMDB: true
	});
}
</script>
</body>
</html>
