name: Heroku standin
on:
  pull_request:
    paths-ignore:
      - 'Heroku/**'
      - '.github/workflows/Heroku.yml'
concurrency:
  group: ${{ github.ref == 'refs/heads/master' && format('ci-heroku-standin-master-{0}', github.sha) || format('ci-heroku-standin-{0}', github.ref) }}
  cancel-in-progress: true
jobs:
  check-gradle:
    name: ðŸ”¨ Build & Check (Gradle)
    runs-on: ubuntu-20.04
    timeout-minutes: 1
    steps:
      - run: 'echo "No build required. Executed this echo to get a status report for branch protection."'

      - name: Checkout ${{ github.ref }} branch in ${{ github.repository }} repository.
        uses: actions/checkout@v3

      - name: Publish "Code scanning results / detekt".
        uses: github/codeql-action/upload-sarif@v2
        with:
          category: '.github/workflows/Heroku.yml:check-gradle'
          sarif_file: ${{ github.workspace }}/.github/workflows/empty-reports/detekt.sarif

      - name: Publish "ðŸ”” Test Results" check run.
        uses: EnricoMi/publish-unit-test-result-action@v2
        with:
          check_name: ðŸ”” Test Results
          comment_mode: off
          ignore_runs: true
          job_summary: false
          compare_to_earlier_commit: false
          check_run_annotations: false
          fail_on: nothing
          test_changes_limit: 0
          junit_files: ${{ github.workspace }}/.github/workflows/empty-reports/junit.xml

  check-npm:
    name: ðŸ”¨ Build & Check (NPM)
    runs-on: ubuntu-20.04
    timeout-minutes: 1
    steps:
      - run: 'echo "No build required. Executed this echo to get a status report for branch protection."'

  deps:
    name: Calculate Dependency Diff
    runs-on: ubuntu-latest
    timeout-minutes: 1
    steps:
      - run: 'echo "No build required. Executed this echo to get a status report for branch protection."'
